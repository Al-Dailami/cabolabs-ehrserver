'use strict';(function(h){function a(){}function c(c,a){if(f)return a.indexOf(c);for(var g=a.length;g--;)if(a[g]===c)return g;return-1}var d=a.prototype,g=[],f=g.indexOf?!0:!1;d.getListeners=function(c){var a=this._events||(this._events={});return a[c]||(a[c]=[])};d.addListener=function(a,g){var f=this.getListeners(a);-1===c(g,f)&&f.push(g);return this};d.removeListener=function(a,g){var f=this.getListeners(a),d=c(g,f);-1!==d&&(f.splice(d,1),0===f.length&&(this._events[a]=null));return this};d.addListeners=
function(a,c){return this.manipulateListeners(!1,a,c)};d.removeListeners=function(a,c){return this.manipulateListeners(!0,a,c)};d.manipulateListeners=function(a,c,g){var f,e,b=a?this.removeListener:this.addListener,a=a?this.removeListeners:this.addListeners;if("object"===typeof c)for(f in c){if(c.hasOwnProperty(f)&&(e=c[f]))"function"===typeof e?b.call(this,f,e):a.call(this,f,e)}else for(f=g.length;f--;)b.call(this,c,g[f]);return this};d.removeEvent=function(a){a?this._events[a]=null:this._events=
null;return this};d.emitEvent=function(a,c){for(var f=this.getListeners(a),d=f.length;d--;)!0===f[d].apply(null,c||g)&&this.removeListener(a,f[d]);return this};"function"===typeof define&&define.amd?define(function(){return a}):h.EventEmitter=a})(this);
StackExchange.realtime=function(){function h(){if(!(null==p||1!=p.readyState))for(var b=0,e=q.length;b<e;b++)a("sending: "+q[b]),p.send(q[b])}function a(b){StackExchange.options.user.isDeveloper&&console.log(b)}function c(){s.addListener("hb",function(b){p.send(b)})}function d(b){q.push(b);h()}function g(b,e){1!=$("#vote-accepted-"+b.answerid).length&&($(".vote-accepted-on").remove(),e||$('.vote input[value="'+b.answerid+'"]').parent().append('<span class="vote-accepted-on" title="The question owner accepted this as the best answer">accepted</span>'))}
function f(){$.ajax({type:"POST",url:"/review/suggested-edit-count",data:{fkey:StackExchange.options.user.fkey},dataType:"json",success:function(b){if(b&&b.count){var b=b.count,e=$(".suggested-edits-count");e.text()!=b&&(0==$(":animated").length&&e.fadeTo("fast",0.5).fadeTo("fast",1),e.text(b))}}})}function i(){$("#new-answer-activity").remove();$("#answers-header").prepend(w)}function j(b){var e=$(".question[data-questionid="+b.id+"], .answer[data-answerid="+b.id+"]"),a=$('<div class="new-post-activity" data-postid="'+
b.id+'">an edit has been made to this post; click to load</div>');0<e.find(".new-post-activity[data-postid="+b.id+"]").length||e.prepend(a.click(function(){$(".new-post-activity[data-postid="+b.id+"]").remove();0==$("#review-content").length&&$.get("/posts/"+b.id+"/ajax-load-mini?title=true",x(e.find(".postcell, .answercell"),b));$(document).trigger("refreshEdit",b.id)}))}function m(b,e){return b.index<e.index?-1:b.index>e.index?1:0}function l(){var a=[],c;for(c in n)n.hasOwnProperty(c)&&a.push(n[c]);
a=a.sort(m);for(c=0;c<a.length;c++){var f=a[c];$("#question-summary-"+f.id).remove();$(f.body).prependTo("#question-mini-list, #questions").hide().fadeIn()}e(0);null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.applyPrefs(!0,v);"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);b();$(".new-post-activity").remove();n={}}function e(b){var e=document.title.replace(/^\(\d*\*?\) /,"");0<b&&(e="("+b+") "+e);window.setTimeout(function(){$(document).attr("title",
e)},200)}function b(){for(var b=$("span.relativetime, span.relativetime-clean"),e=0;e<b.length;e++)if(b[e].title){var a;a=b[e].title;if(null==a||20!=a.length)a=void 0;else{a=a.substr(0,10)+"T"+a.substr(11,10);a=new Date(a);a=((new Date).getTime()-a.getTime())/1E3;var c=Math.floor(a/86400);a=isNaN(c)||0>c||31<=c?void 0:0==c&&(2>a&&"just now"||60>a&&Math.floor(a)+(u?"s ago":" secs ago")||120>a&&(u?"1m ago":"1 min ago")||3600>a&&Math.floor(a/60)+(u?"m ago":" mins ago")||7200>a&&(u?"1h ago":"1 hour ago")||
86400>a&&Math.floor(a/3600)+(u?"h ago":" hours ago"))}a&&(b[e].innerHTML=a)}}var k,p,n={},o=[],t=0,q=[],r=!1,u=!1,v,s=new EventEmitter,w=function(){var b=Object.keys(o).length;0==b&&$("#new-answer-activity").remove();return $('<div id="new-answer-activity">'+b+" new answer"+(1<b?"s":"")+" to this question</div>").click(function(){StackExchange.realtime.expandAnswers()})},x=function(b,a){return function(e){var c=$(e).find(".postcell, .answercell"),f=b.closest(".question").length;b.replaceWith(c.hide());
e=$(e).attr("data-title");null!=e&&$("h1 a.question-hyperlink").text(e);c.fadeIn(400,function(){StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts();styleCode()});StackExchange.comments.init({post:c});StackExchange.vote.init(a.id);StackExchange.vote||StackExchange.question.bindAnonymousVoteDisclaimers();b.find("a[id^='link-post-']").click(function(b){if(!b.ctrlKey&&!b.metaKey)return StackExchange.question.showShareTip($(this),options.showCitation),!1});StackExchange.question.bindSuggestedEditPopupLinks();
f&&StackExchange.inlineTagEditing&&StackExchange.inlineTagEditing.init();window.history.pushState(a,"new post","#"+a.id)}},y=function(){var b=Object.keys(n).length;e(b);return $('<div class="new-post-activity">'+b+" question"+(1<b?"s":"")+" with new activity</div>").click(function(){StackExchange.realtime.expandActiveQuestions()})};return{init:function(e){k=e;if("WebSocket"in window||"MozWebSocket"in window){if(p)try{a("closing WebSocket"),p.close()}catch(f){}p||(a("opening WebSocket"),p="WebSocket"in
window?new WebSocket(k):new MozWebSocket(k),p.onopen=function(){r||(r=!0);t=0;a("WebSocket opened");h();c();setInterval(b,6E4)},p.onmessage=function(b){b=$.parseJSON(b.data);s.emitEvent(b.action,[b.data])},p.onclose=function(){p=null;a("WebSocket closed");5>t&&(t++,a("reconnect attempt:"+t),setTimeout('StackExchange.realtime.init("'+k+'")',1E3*((new Date).getTime()%50/20)))},p.onerror=function(){a("WebSocket failed");p=null})}},expandActiveQuestions:l,expandAnswers:function(){var e=$("#answers #answers-header .answers-subheader h2"),
a=parseInt(e.text().match(/^\d*\*?/))+o.length;isNaN(a)&&(a=o.length);e.text(a+" Answer"+(1<a?"s":""));$("#new-answer-activity").remove();var c=$("#answers #answers-header");$.each(o,function(b,a){$.get("/posts/"+a+"/ajax-load-mini",function(b){b=$(b);b.insertAfter(c).hide().fadeIn(400,function(){StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts();styleCode()});StackExchange.comments.init({post:b});StackExchange.vote.init(a)})});StackExchange.vote||StackExchange.question.bindAnonymousVoteDisclaimers();
c.find("a[id^='link-post-']").click(function(b){if(!b.ctrlKey&&!b.metaKey)return StackExchange.question.showShareTip($(this),options.showCitation),!1});StackExchange.question.bindSuggestedEditPopupLinks();b();o=[]},subscribeToActiveQuestions:function(b,a,e,c,f,g,k){b=b+"-"+a;v=e;u=g;d(b);s.addListener(b,function(b){b=$.parseJSON(b);if(null!=f)for(var a=0;a<f.length;a++)if(-1==$.inArray(f[a],b.tags))return;null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.isIgnored(b.body)||
(n[b.id]={id:b.id,body:b.body,index:(new Date).getTime(),siteid:b.siteid},$(".new-post-activity").remove(),$("#question-mini-list, #questions").prepend(y),c&&l());null!=k&&k(b)})},subscribeToInboxNotifications:function(){if(null!=StackExchange.options.user.accountId){var b=StackExchange.options.user.accountId+"-inbox";d(b);s.addListener(b,function(b){$(".unreadCount").remove();var a=$('<a class="unreadCount" title="unread messages in your inbox">'+b+"</a>").insertAfter(".genu");$("#portalLink .unreadCount").css({marginTop:a.css("margin-top"),
opacity:1},2E3);genuwine.setUnreadCount(b)})}},subscribeToQuestion:function(b,a){var e=b+"-question-"+a;d(e);s.addListener(e,function(b){b=$.parseJSON(b);if(b.acctid!=StackExchange.options.user.accountId)switch(b.a){case "score":var a=$('.vote input[value="'+b.id+'"]').siblings(".vote-count-post");a.text()!=b.score&&(a.text(b.score),0==$(":animated").length&&a.fadeTo("fast",0.7).fadeTo("fast",1),StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts());break;case "comment-add":0==
$("#comment-"+b.commentid).length&&(b=$("#comments-link-"+b.id),a=b.data("comments-count")||0,a++,b.data("comments-count",a),b.attr("title","expand to show all comments on this post, or add one of your own"),b.html("add / show <b>"+a+"</b> more comment"+(1<a?"s":"")).show().fadeTo("fast",0.7).fadeTo("fast",1));break;case "answer-add":0==$("#answer-"+b.answerid).length&&(o.push(b.answerid),StackExchange.cardiologist.isHeartBeating()?StackExchange.helpers.DelayedReaction(i,5E3).trigger():i(),StackExchange.cardiologist.notifiedOfNewAnswer());
break;case "accept":g(b);break;case "unaccept":g(b,!0);break;case "post-edit":j(b)}})},unsubscribeToQuestion:function(b,e){var c=b+"-question-"+e;a("unsubscribing: "+c);var f=$.inArray(c,q);-1!=f&&(q.splice(f,1),null==p||1!=p.readyState||p.send("-"+c))},subscribeToReputationNotifications:function(b){null!=StackExchange.options.user.accountId&&(b=b+"-"+StackExchange.options.user.userId+"-reputation",d(b),s.addListener(b,function(b){var a=$("#hlinks .reputation-score");a.text()!=b.score&&(0==$(":animated").length&&
a.fadeTo("fast",0.8).fadeTo("fast",1),a.text(b))}))},subscribeToSuggestedEdits:function(b){b+="-suggested-edits-count-update";d(b);s.addListener(b,function(){f()})},updateRelativeDates:b}}();"use strict";StackExchange.anonymous={};
var gauth=function(){return{informStackAuth:function(h){if(gauth.enabled()){var a=document.domain;"meta."==a.substr(0,5)&&(a=a.substr(4,a.length-4));var c=$.cookie("gauth");if(null==c)$.cookie("gauth",null,{path:"/",domain:a}),$.cookie("gauth",null,{path:"/",domain:document.domain});else{"."!=a.charAt(0)&&(a="."+a);$.cookie("gauth",null,{path:"/",domain:a});$.cookie("gauth",null,{path:"/",domain:document.domain});var d=c.indexOf(":"),a=c.substr(0,d),c=c.substr(d+1),g=h+"/auth/global/write?authToken="+
encodeURIComponent(a)+"&nonce="+encodeURIComponent(c);$(document).ready(function(){$("#footer").append("<iframe style='display:none' src='"+g+"'></iframe>")})}}},checkStackAuth:function(h){if(gauth.enabled()&&null==$.cookie("gauthed")){$.cookie("gauthed","1",{path:"/"});var a=function(a){if(a.origin==h)if("No Local Storage"==a.data)gauth.noGAuthStorage();else if("No Session"==a.data)gauth.noGAuthSession();else{var d=a.data.substr(0,a.data.indexOf(",")),a=a.data.substr(a.data.indexOf(",")+1);$.post("/users/login/global",
{authToken:d,nonce:a},function(a){gauth.globallyAuthed(a)},"json")}};window.attachEvent?window.attachEvent("onmessage",a):window.addEventListener("message",a,!1);$.post("/users/login/global/request","",function(a){var d=h+"/auth/global/read?request="+encodeURIComponent(a.token)+"&nonce="+encodeURIComponent(a.nonce);$(document).ready(function(){$("#footer").append("<iframe id='global-auth-frame' style='display:none' src='"+d+"'></iframe>")})},"json")}},enabled:function(){$.cookie("enabledCheck","1");
if(null==$.cookie("enabledCheck"))return!1;$.cookie("enabledCheck",null);return"undefined"==typeof localStorage?!1:!0},noGAuthStorage:function(){},noGAuthSession:function(){},globallyAuthed:function(h){if(h&&h.Message){var h=h.Message+" ",a,c=!1,d=""+window.location,g=d.indexOf("returnurl=");if(-1!=g){var f=d.indexOf("&",g);-1==f&&(f=d.length);a=decodeURIComponent(d.substring(g+10,f));a=/^(?:http:\/\/|\/)/.test(a)?a.replace(/[^-a-z0-9+&@#\/%?=~_|!:,.;()]/g,""):null}-1!=d.indexOf("/users/login")&&
(c=!0,a=a||"/");StackExchange.helpers.showFancyOverlay({message:c?h+"<br>You are being redirected...":h+(a?"<a href=\"javascript:window.location='"+a+"'\">Click here</a> to return to your last location.":'<a href="javascript:location.reload(true)">Click here</a> to refresh the page.'),showClose:!c,complete:function(){c&&(window.location=a)}})}}}}(),genuwine=function(){var h,a="",c,d,g=[],f=function(){return $(".genu").hasClass("genu-on")},i=function(){var b=$(".genu"),a=$("#seWrapper");if(0==a.length||
0<c||d){m();var a=$("#seWrapper"),e;0<c?(e=$("#seTabInbox"),t(e)):d?(e=$("#seTabNotices"),l(e)):(e=$("#seTabHot"),k(e));e.addClass("seCurrent")}if(e=b.hasClass("genu-on")){$(".unreadCountTab").remove();$(".itemBoxNew").removeClass("itemBoxNew");a.fadeOut("fast");for(a=0;a<g.length;a++)g[a]();g=[];0<d&&$("#portalLink .unreadCount").text(""+d).addClass("newNotices").show().click(i)}else a.fadeIn("fast"),$(".unreadCount").hide();b.toggleClass("genu-on",!e);-1==c&&$(b).ready(function(){$("#seTabInbox").hide()});
j($("#seTabInbox"),$("#seTabNotices"))},j=function(b,a){StackExchange.options.site.isNoticesTabEnabled&&d&&0==a.find(".unreadCountTab").length&&a.prepend('<span class="unreadCountTab newNotices">'+d+"</span>");0<c&&0==b.find(".unreadCountTab").length&&b.prepend('<span class="unreadCountTab">'+c+"</span>")},m=function(){$("#seWrapper").remove();var e='<div id="seWrapper" style="position:absolute; display:none;"><div class="seIntro"><a href="'+a+'">Stack Exchange</a> is a network of free, community-driven Q&A sites.</div><div class="seNav"><ul class="seNavLinks"><li><a id="seTabHot">Hot Questions</a></li><li><a id="seTabSites">All Sites</a></li>'+
(!StackExchange.options.user.isAnonymous?'<li><a id="seTabInbox">Inbox</a></li>':"")+(!StackExchange.options.user.isAnonymous&&StackExchange.options.site.isNoticesTabEnabled?'<li><a id="seTabNotices">Notifications</a></li>':"")+'</ul></div><div class="seContainer"></div><div class="seFooter">'+(!StackExchange.options.user.isAnonymous?'<div id="seTabEmail" class="seEmailAccount"><a>email settings</a></div>':"")+'<a id="seClose">close</a></div></div>',c=$("#hlinks"),c=c.height()+c.offset().top+5;$(e).appendTo("#portalLink").css({top:c}).find("ul.seNavLinks a, #seTabEmail").click(function(){var a=
$(this);$(".seNavLinks a").removeClass("seCurrent");a.addClass("seCurrent");switch(a.attr("id")){case "seTabHot":k(a);$("#seContainerSites, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerHot").fadeIn("fast");break;case "seTabSites":0==$("#seContainerSites").length&&b(a);$("#seContainerHot, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerSites").fadeIn("fast");break;case "seTabInbox":t(a);$("#seContainerHot, #seContainerSites, #seContainerEmail, #seContainerNotices").hide();
$("#seContainerInbox").fadeIn("fast");break;case "seTabEmail":0==$("#seContainerEmail").length&&p(a);$("#seContainerHot, #seContainerSites, #seContainerInbox, #seContainerNotices").hide();$("#seContainerEmail").fadeIn("fast");break;case "seTabNotices":l(a),$("#seContainerHot, #seContainerSites, #seContainerInbox, #seContainerEmail").hide(),$("#seContainerNotices").fadeIn("fast")}});$("#seClose").click(function(){i()})},l=function(b){0==$("#seContainerNotices").length&&v(b,"/notices/genuwine?userId="+
StackExchange.options.user.id,"jsonp",e,!0)},e=function(b,a){for(var e='<div id="seContainerNotices" style="display:none">',c=0;c<a.length;c++)var f=a[c],e=e+('<div class="noticeBox'+(f.is_unread?" itemBoxNew":"")+'"><a href="'+f.site_url+'" class="siteLinkFavicon"><img src="'+f.icon+'"></a><div class="siteInfo"><p>'+f.text+"</p></div></div>");s(b,e+"</div>");g.push(function(){d=0;j($("#seTabInbox"),$("#seTabNotices"))});d=0},b=function(b){v(b,a+"/genuwine/sites?callback=?&host="+document.location.host+
(h?"&accountId="+h:""),"jsonp",o)},k=function(b){0==$("#seContainerHot").length&&v(b,a+"/genuwine?callback=?","jsonp",n)},p=function(b){v(b,"/accounts/email-settings","json",function(b,a){function e(){$("#email-save").removeAttr("disabled");$("#email-confirmation").html("")}s(b,'<div id="seContainerEmail" style="display:none; font-size:11px;"><div class="itemBox" style="border-bottom: 0px"><p>Would you like to receive unread inbox messages via email?</p><div>Email: <input id="email-notify" name="email-notify" style="width:300px;" value="'+
a.verifiedEmail+'"></input></div><div><input type="radio" name="optIn" value="true" id="email-enable"'+(!0==a.optIn?'checked="checked"':"")+'"> <label for="email-enable">Email me my unread inbox messages </label> <select id="email-freq"><option value="3">every 3 hours</option><option value="24">daily</option><option value="168">weekly</option></select> </div><div><input type="radio" name="optIn" value="false" id="email-disable"'+(!0!=a.optIn?'checked="checked"':"")+'"> <label for="email-disable">Do not email me inbox messages</label></input></div><div><input type="button" name="save" id="email-save" value="Save" disabled="disabled"></input></div><div id="email-confirmation" style="display:none;"></div></div></div>');
$("#email-freq").val(a.freq).on("click focus",function(){$("#email-enable").prop("checked",!0)});$("#email-notify").focus().keyup(e);$("#email-enable, #email-disable, #email-freq").change(e);$("#email-save").click(function(){w();$.post("/accounts/verified-email-set",{email:$("#email-notify").val(),fkey:StackExchange.options.user.fkey,optin:$("input[name=optIn]:checked").val(),freq:$("#email-freq").val()},function(b){$(".seContainer").removeSpinner();$("#email-confirmation").html(b.message).fadeIn();
b.success&&$("#email-save").attr("disabled","disabled")},"json")})},!0)},n=function(b,a){for(var e=$("<div/>"),c='<div id="seContainerHot" style="display:none">',f=0;f<a.length;f++)var g=a[f],d=g.SiteId,k='href="http://'+d+"/q/"+g.Id+'?hq=1"',o=parseInt(g.DisplayScore,10),c=c+('<div class="itemBox"><a '+k+' class="seNumAnswer">'+o+'</a><div class="siteInfo"><p><a '+k+">"+e.text(g.Title).html()+'</a></p><a href="http://'+d+'" class="siteLink">'+d+"</a></div></div>");s(b,c+"</div>")},b=function(b){v(b,
a+"/genuwine/sites?callback=?&host="+document.location.host+(h?"&accountId="+h:""),"jsonp",o)},o=function(b,a){for(var e='<div id="seContainerSites" style="display:none">',c=0;c<a.length;c++)var f=a[c],g=f.Name,d='href="http://'+f.Id+'?as=1"',e=e+('<div class="itemBox"><a '+d+' class="siteFavicon"><img src="'+f.FaviconUrl+'" alt="'+g+'"></a><div class="siteInfo"><p><a '+d+">"+g+"</a></p><a "+d+' class="siteLink">'+f.Description+"</a></div></div>");s(b,e+"</div>")},t=function(b){-1!=c&&(0==$("#seContainerInbox").length||
0<c)&&q(b)},q=function(b){v(b,"/inbox/genuwine","json",r,!0)},r=function(b,a){for(var e='<div id="seContainerInbox" style="display:none">',f=0;f<a.length;f++){var d=a[f],k='href="'+d.Url+'"',o='title="'+d.CreationDate+'"',m=d.Count,e=e+('<div class="itemBox'+(d.IsNew?" itemBoxNew":"")+'"><a '+k+' class="siteLinkFavicon"><img src="'+d.FaviconUrl+'" alt="'+d.SiteUrl+'"></a><div class="siteInfo">');"careers message"==d.Type?e+="<p><a "+k+' style="font-weight:normal"><b>'+d.Title+"</b> wants to contact you on <b>Stack Overflow Careers</b></a></p>":
"invitation"==d.Type?(o=d.Count,e+="<p><a "+k+' style="font-weight:normal"><b>'+o+"</b> "+("invitation"+(1<o?"s":""))+" awarded on <b>Stack Overflow Careers</b></a></p>"):e+="<p>"+(1<m?m+" ":"")+d.Type+" on <a "+k+" "+o+">"+d.Title+"</a></p>";e+='<p class="inboxSummary">'+(d.Summary||"")+"</p></div></div>"}h&&5<=a.length&&(e+='<div class="itemMoreContainer"><div class="seIntro"><a href="http://stackexchange.com/users/'+h+'?tab=inbox">more inbox messages &hellip;</a></div></div>');s(b,e+"</div>");
g.push(function(){c=0;j($("#seTabInbox"),$("#seTabNotices"))});c=0},u={},v=function(b,a,e,c,f){var d=b.attr("id");if(u[d])w();else{u[d]=!0;w();var g=function(){u[d]=!1;StackExchange.helpers.showErrorPopup($(".seContainer"),"An error occurred while loading - please try again.")};$.ajax({type:"GET",url:a,dataType:e,success:function(a){u[d]=!1;a&&(0<a.length||f)?c(b,a):g()},error:g,complete:function(){$(".seContainer").removeSpinner()}})}},s=function(b,a){var e=$(a);e.prependTo(".seContainer");b.hasClass("seCurrent")&&
e.fadeIn("fast")},w=function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.addSpinner(".seContainer",{position:"relative",left:"10px",top:"10px"})},x=function(){var b=$("#portalLink .unreadCount"),a=b.css("margin-top");b.css({marginTop:-20,opacity:0}).show().animate({marginTop:a,opacity:1},2E3)},y=function(){var b=$(".unreadCount"),a=b.data("events");(!a||!a.click)&&0<b.length&&b.click(i)};return{isVisible:f,click:i,setUnreadCount:function(b){c=b;var a=$("#seTabInbox");0<b?($("#portalLink .unreadCount").text(c),
a.hasClass("seCurrent")&&f()&&q(a),x()):$("#portalLink .unreadCount").text("").hide();$("#portalLink .unreadCount").removeClass("newNotices");y()},animateInbox:x,init:function(b,e,g){var k=$(".genu");1<=k.length&&(k[0].onclick=null);h=b;a=k.attr("href");c=e;d=g;!(0<c)&&StackExchange.options.site.isNoticesTabEnabled&&(99<d&&(d=99),0<d&&$("#portalLink .unreadCount").text(""+d).addClass("newNotices"),y());k.removeAttr("href").click(i);y();$(document).click(function(b){f()&&!$.contains($("#portalLink")[0],
b.target)&&i()})}}}();
StackExchange.notify=function(){function h(a,c){var e=$("#dismissed-messages");e.val(e.val()+"~"+a+(c?" "+c:"")+"~")}function a(a,c){var e=$("#dismissed-messages").val();return!e?!1:RegExp("~"+a+(c?" "+c:"")+"~").test(e)}function c(a,c,e){var b=parseInt($("body").css("margin-top").match(/\d+/)),a=c*b/a;e?$("body:not(.no-message-slide)").animate({marginTop:a+"px"},"fast","linear"):$("body:not(.no-message-slide)").css("marginTop",a+"px")}var d=0,g=function(a,f){var e=$("#notify-"+a+(f?"-"+f:""));-1==
a?$.cookie("m","0",{expires:90,path:"/"}):-1<a&&$.post("/messages/mark-as-read",{messagetypeid:a,id:f?f:null});h(a,f);d--;e.fadeOut("fast",function(){c(d+1,d,!0);e.remove()})},f=function(c){d++;if(a(c.messageTypeId,c.id))return!1;var f="";c.messageTypeId&&(f=' id="notify-'+c.messageTypeId+(c.id?"-"+c.id:"")+'"');f="<div"+f+' style="display:none"><span class="notify-close"><a title="dismiss this notification">&times;</a></span><span class="notify-text">'+c.text+"</span>";if(c.showProfile)var e=encodeURIComponent("/users/"+
c.userId+"?tab=badges&sort=recent"),f=f+(' See your <a href="/messages/mark-as-read?messagetypeid='+c.messageTypeId+"&returnurl="+e+'">profile</a>.');f=$(f+"</div>");f.find(".notify-close").click(function(){c.close&&c.close();g(c.messageTypeId,c.id)});$("#notify-container").append(f);return!0},i=function(){$("#notify-container div").fadeIn("slow")},j=function(a,c){var e=$('<div class="link-more"><a>view '+a+" more notification"+(1!=a?"s":"")+"</a></div>");$("#notify-container").append(e);e.click(function(){e.detach();
for(var b=0;b<c.length;b++)f(c[b]);i()})};return{showMessages:function(a,g){for(var e=0,b=g?2:a.length,k=0;k<b&&k<a.length;k++)f(a[k])&&e++;c(d,e,!1);i();g&&e<a.length&&(b=a.slice(b),j(a.length-e,b))},show:function(a,c){$("body:not(.no-message-slide)").animate({marginTop:"2.5em"},"fast","linear");f({text:a,messageTypeId:c});i()},close:g,getMessageText:function(a){return $("#notify-"+a+" .notify-text").text()}}}();
function moveScroller(){var h=$("#scroller").width(),a=function(){var a=$(window).scrollTop(),d=$("#scroller-anchor").offset().top,g=$("#scroller");a>d?g.height()>$(window).height()?g.css({position:"fixed",top:"",bottom:"0px",width:h}):g.css({position:"fixed",top:"0px",bottom:"",width:h}):a<=d&&g.css({position:"relative",top:"",bottom:""})};$(window).scroll(a).resize(a);a()}
var styleCode=function(){return function(){"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);var h=!1;$("pre code").parent().each(function(){$(this).hasClass("prettyprint-override")&&($(this).removeClass("prettyprint-override").addClass("prettyprint"),h=!0);var a;if(a=!$(this).hasClass("prettyprint")){a=$(this);var c=$("#prettify-lang").text();""!=c?(a.addClass(c),a=!0):a=!1}a&&($(this).addClass("prettyprint"),h=!0)});h&&("undefined"!=typeof jtab?jtab.renderimplicit():StackExchange.using("prettify",
function(){StackExchange.prettify.applyCodeStyling()}))}}();
StackExchange.helpers.MagicPopup=function(h){function a(a,f){var e=$("<div id='"+h.id+"'/>").html(f),b=$("<div />").css({overflow:"hidden",position:"absolute",width:1,height:1,top:0,left:0}).append(e).appendTo("body"),d=h.showing(a,e),i={left:d.left};d.hasOwnProperty("bottom")?(i.bottom=d.bottom,i.top="auto"):i.top=d.top;var j;h.shown&&(j=function(){h.shown(a,e)});b.css(i).animate({height:e.outerHeight()+8,width:e.outerWidth()+8},300,j);c=function(){b.stop().remove();h.removed&&h.removed(a,e);c=g=
null};g=StackExchange.helpers.DelayedReaction(c,5);i=b;d.additional&&(i=i.add(d.additional));i.hover(g.cancel,g.trigger)}var c,d,g,f,i={},j=StackExchange.helpers.DelayedReaction(function(d,g){if(!f&&d){var e;h.cache&&"c_"+d in i?e=$.Deferred().resolve(i["c_"+d]):(e=$.ajax({type:"GET",url:d,dataType:"html"}),h.cache&&e.done(function(b){i["c_"+d]=b}));e.done(function(b){c&&c();""!=b&&a(g,b)})}},500);$(document).delegate(h.selector,{mouseenter:function(){if(g&&this===d)g.cancel();else return d=this,
j.trigger(h.getUrl(this),this),f=!1},mouseleave:function(){f=!0;j.cancel();g&&g.trigger()}})};
StackExchange.tagmenu=function(){function h(a){var a=$(a),c=a.attr("href");if(!c||"/"!=c.charAt(0))return null;c=a.text();if(-1<c.indexOf("*"))return null;a.attr("title","");return"/tags/"+encodeURIComponent(c)+"/subscriber-info"}function a(a,c){var d=$(a),h=d.offset(),m=d.outerHeight(),d={left:h.left},l=h.top+m,m=h.left+c.outerWidth();c.height()+l>$(window).height()+$(window).scrollTop()?d.bottom=$(window).height()-h.top-8:d.top=l;h=Math.max(1024,$(window).width());m>h&&(d.left-=m-h);return d}var c,
d;return{init:function(g){c=g;d||(d=!0,StackExchange.options.isMobile||(StackExchange.helpers.MagicPopup({selector:".post-tag:not(.user-tag)",id:"tag-menu",getUrl:h,showing:a,shown:function(a,d){c&&c(d,$(a).text())}}),$("#interesting-tags .post-tag").addClass("user-tag")))}}}();
StackExchange.usermenu=function(){function h(a,c){var h=$(a).find("img:first"),j=h.offset(),m=h.height(),l=h.width(),e=Math.max(l,m),b=64*m/e,e=64*l/e,k=c.find("img:first").css({width:e,height:b}),p=k.offset();k.css("visibility","hidden");d=h.clone().css({position:"absolute",zIndex:300,left:j.left,top:j.top,width:l,height:m}).appendTo("body");var n=function(){k[0].complete?(k.css("visibility","visible"),d.fadeOutAndRemove()):setTimeout(n,500)};d.animate({width:e,height:b,top:j.top+p.top},200,n);return{top:j.top,
left:j.left-p.left,additional:d}}function a(){d.remove()}var c,d;return{init:function(){c||(c=!0,StackExchange.options.isMobile||StackExchange.helpers.MagicPopup({selector:".user-hover .user-gravatar48, .user-hover .user-gravatar32",getUrl:function(a){a=/\/users\/([^/]+).*$/.exec($(a).closest(".user-hover").find(".user-details a").attr("href"));return!a?null:"/users/user-info/"+a[1]},cache:!0,id:"user-menu",showing:h,removed:a}))}}}();
StackExchange.chatAd=function(){function h(){var b=$(".question .post-taglist .post-tag");return!b.length?null:b.map(function(b,a){return $(a).text()}).get().join(" ")}function a(b){return 10>b?"0"+b:b}function c(b){var e=new Date;e.setTime(1E3*b);return[e.getUTCFullYear(),"-",a(e.getUTCMonth()+1),"-",a(e.getUTCDate())," ",a(e.getUTCHours()),":",a(e.getUTCMinutes()),":",a(e.getUTCSeconds()),"Z"].join("")}function d(b){var e=Math.floor((new Date).getTime()/1E3)-b,c=e%60,f=Math.floor(e/60),d=Math.floor(e/
3600);if(1>e)return"just now";if(60>e)return 1==c?"1 sec ago":c+" secs ago";if(3600>e)return 1==f?"1 min ago":f+" mins ago";if(86400>e)return 1==d?"1 hour ago":d+" hours ago";e=Math.floor(e/86400);if(1==e)return"yesterday";if(2>=e)return e+" days ago";b=new Date(1E3*b);return n[b.getMonth()]+" "+b.getDate()+" at "+b.getHours()+":"+a(b.getMinutes())}function g(b){var a=$("<div />");a.text(b);return a.html().replace('"',"&quot;")}function f(){$.get(e,null,function(b,a,e){m(b,a,e)})}function i(b){for(var a=
$('<div class="ad502-users" />'),e=0;e<b.length&&7>e;e++){var c=b[e],f=c.name;c.lastPost&&(f+=": "+d(c.lastPost));var g="http://www.gravatar.com/avatar/"+c.emailhash+"?s=23&d=identicon&r=PG",c=$('<a href="'+(l+"/users/"+c.id)+'" />');$("<img />").attr("title",f).attr("src",g).appendTo(c);a.append(c)}return a}function j(b){var a=b.user;return(b=b.userid)?'<a href="'+l+"/users/"+b+'">'+g(a)+"</a>":g(a)}function m(a){var e=$("#ad502-rooms");if(!a.error){e.html("");for(var h=a.rooms,r=0;r<h.length&&2>
r;r++){var n=h[r],m=l+"/rooms/"+n.id,s=$('<div class="ad502-room"></div>');s.append($('<h3 class="ad502-room-h3"><span class="ad502-room-title" title="'+g(n.name)+'"><a href="'+m+'">'+g(n.name)+"</a></span></h3>"));n.messages&&0<n.messages.length&&s.append($('<span title="'+c(n.lastPost)+'" class="ad502-last-message">'+d(n.lastPost)+" - "+j(n.messages[0])+"</span><br>"));n.singleImage?s.append($('<div class="ad502-users"><img src="'+l+"/rooms/users/"+n.id+'.jpeg" /></div>')):s.append(i(n.users));
e.append(s)}1<a.activeUsers?$("#h-chat-link").text(a.activeUsers+" People Chatting"):$("#h-chat-link").text("Visit Chat");$("#h-chat-link").attr("title",a.activeUsers+" users active in "+a.activeRooms+" rooms the last 60 minutes")}b<=p&&window.setTimeout(f,1E3*b);b+=k}var l,e,b=180,k=30,p=480,n="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",");/^\/questions\/\d+/i.test(window.location.pathname)&&(p=0);return{init:function(b){l=b.chatUrl;e=b.reloadUrl;if(b.tagBased){var a=h();if(!a)return;
e+=(/\?/.test(e)?"&":"?")+"tags="+encodeURIComponent(a)}null===b.preloadData?f():m(b.preloadData,null,null)}}}();
StackExchange.helpers.noDiacritics=function(){var h={"\u00e0\u00e5\u00e1\u00e2\u00e4\u00e3\u00e5\u0105\u0250\u1d44\u1d9b":"a","\u00e6\u01e3\u01fd\u1d02\u1d46":"ae","\u00e7\u0107\u010d\u0109":"c","\u0111\u018d\u00f0\u00d0":"d","\u00e8\u00e9\u00ea\u00eb\u0119\u01dd\u1d08\u1d4c":"e","\u214e":"f","\u011f\u011d\u1d77":"g","\u0125\u0265\u02ae\u1da3":"h","\u00ec\u00ed\u00ee\u00ef\u0131\u1d09\u1d4e":"i","\u0135":"j","\u029e":"k","\u0142":"l","\u026f\u0270\u1d5a\u1dad\u1d1f":"m","\u00f1\u0144":"n","\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u0151":"o",
"\u0153\u0276\u1d14":"oe","\u0159\u0279\u027a\u027b\u02b4\u02b5":"r","\u015b\u015f\u0161\u015d":"s","\u00df":"ss","\u0287":"t","\u00de":"th","\u00f9\u00fa\u00fb\u00fc\u016d\u016f":"u","\u028c\u1dba":"v","\u028d":"w","\u00fd\u0178\u00ff\u028e":"y","\u017c\u017a\u017e":"z"};return function(a){for(var c in h)h.hasOwnProperty(c)&&(a=a.replace(RegExp("["+c+"]"),h[c]));return a}}();
function sanitizeAndSplitTags(h,a){for(var h=$.trim(h).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 "),c=h.split(/[\s|,;]+/),d=[],g=0;g<c.length;g++){var f=c[g].toLowerCase();StackExchange.options.site.nonAsciiTags||(f=StackExchange.helpers.noDiacritics(f));f=f.replace(/_/g,"-");f=f.replace(RegExp("[^a-z0-9.#+"+(a?"*":"")+(StackExchange.options.site.nonAsciiTags?"0-9,A-Z,_,a-z,\u00aa,\u00b5,\u00ba,\u00c0-\u00d6,\u00d8-\u00f6,\u00f8-\u02c1,\u02c6-\u02d1,\u02e0-\u02e4,\u02ec,\u02ee,\u0370-\u0374,\u0376-\u0377,\u037a-\u037d,\u0386,\u0388-\u038a,\u038c,\u038e-\u03a1,\u03a3-\u03f5,\u03f7-\u0481,\u048a-\u0523,\u0531-\u0556,\u0559,\u0561-\u0587,\u05d0-\u05ea,\u05f0-\u05f2,\u0621-\u064a,\u0660-\u0669,\u066e-\u066f,\u0671-\u06d3,\u06d5,\u06e5-\u06e6,\u06ee-\u06fc,\u06ff,\u0710,\u0712-\u072f,\u074d-\u07a5,\u07b1,\u07c0-\u07ea,\u07f4-\u07f5,\u07fa,\u0904-\u0939,\u093d,\u0950,\u0958-\u0961,\u0966-\u096f,\u0971-\u0972,\u097b-\u097f,\u0985-\u098c,\u098f-\u0990,\u0993-\u09a8,\u09aa-\u09b0,\u09b2,\u09b6-\u09b9,\u09bd,\u09ce,\u09dc-\u09dd,\u09df-\u09e1,\u09e6-\u09f1,\u0a05-\u0a0a,\u0a0f-\u0a10,\u0a13-\u0a28,\u0a2a-\u0a30,\u0a32-\u0a33,\u0a35-\u0a36,\u0a38-\u0a39,\u0a59-\u0a5c,\u0a5e,\u0a66-\u0a6f,\u0a72-\u0a74,\u0a85-\u0a8d,\u0a8f-\u0a91,\u0a93-\u0aa8,\u0aaa-\u0ab0,\u0ab2-\u0ab3,\u0ab5-\u0ab9,\u0abd,\u0ad0,\u0ae0-\u0ae1,\u0ae6-\u0aef,\u0b05-\u0b0c,\u0b0f-\u0b10,\u0b13-\u0b28,\u0b2a-\u0b30,\u0b32-\u0b33,\u0b35-\u0b39,\u0b3d,\u0b5c-\u0b5d,\u0b5f-\u0b61,\u0b66-\u0b6f,\u0b71,\u0b83,\u0b85-\u0b8a,\u0b8e-\u0b90,\u0b92-\u0b95,\u0b99-\u0b9a,\u0b9c,\u0b9e-\u0b9f,\u0ba3-\u0ba4,\u0ba8-\u0baa,\u0bae-\u0bb9,\u0bd0,\u0be6-\u0bef,\u0c05-\u0c0c,\u0c0e-\u0c10,\u0c12-\u0c28,\u0c2a-\u0c33,\u0c35-\u0c39,\u0c3d,\u0c58-\u0c59,\u0c60-\u0c61,\u0c66-\u0c6f,\u0c85-\u0c8c,\u0c8e-\u0c90,\u0c92-\u0ca8,\u0caa-\u0cb3,\u0cb5-\u0cb9,\u0cbd,\u0cde,\u0ce0-\u0ce1,\u0ce6-\u0cef,\u0d05-\u0d0c,\u0d0e-\u0d10,\u0d12-\u0d28,\u0d2a-\u0d39,\u0d3d,\u0d60-\u0d61,\u0d66-\u0d6f,\u0d7a-\u0d7f,\u0d85-\u0d96,\u0d9a-\u0db1,\u0db3-\u0dbb,\u0dbd,\u0dc0-\u0dc6,\u0e01-\u0e30,\u0e32-\u0e33,\u0e40-\u0e46,\u0e50-\u0e59,\u0e81-\u0e82,\u0e84,\u0e87-\u0e88,\u0e8a,\u0e8d,\u0e94-\u0e97,\u0e99-\u0e9f,\u0ea1-\u0ea3,\u0ea5,\u0ea7,\u0eaa-\u0eab,\u0ead-\u0eb0,\u0eb2-\u0eb3,\u0ebd,\u0ec0-\u0ec4,\u0ec6,\u0ed0-\u0ed9,\u0edc-\u0edd,\u0f00,\u0f20-\u0f29,\u0f40-\u0f47,\u0f49-\u0f6c,\u0f88-\u0f8b,\u1000-\u102a,\u103f-\u1049,\u1050-\u1055,\u105a-\u105d,\u1061,\u1065-\u1066,\u106e-\u1070,\u1075-\u1081,\u108e,\u1090-\u1099,\u10a0-\u10c5,\u10d0-\u10fa,\u10fc,\u1100-\u1159,\u115f-\u11a2,\u11a8-\u11f9,\u1200-\u1248,\u124a-\u124d,\u1250-\u1256,\u1258,\u125a-\u125d,\u1260-\u1288,\u128a-\u128d,\u1290-\u12b0,\u12b2-\u12b5,\u12b8-\u12be,\u12c0,\u12c2-\u12c5,\u12c8-\u12d6,\u12d8-\u1310,\u1312-\u1315,\u1318-\u135a,\u1380-\u138f,\u13a0-\u13f4,\u1401-\u166c,\u166f-\u1676,\u1681-\u169a,\u16a0-\u16ea,\u1700-\u170c,\u170e-\u1711,\u1720-\u1731,\u1740-\u1751,\u1760-\u176c,\u176e-\u1770,\u1780-\u17b3,\u17d7,\u17dc,\u17e0-\u17e9,\u1810-\u1819,\u1820-\u1877,\u1880-\u18a8,\u18aa,\u1900-\u191c,\u1946-\u196d,\u1970-\u1974,\u1980-\u19a9,\u19c1-\u19c7,\u19d0-\u19d9,\u1a00-\u1a16,\u1b05-\u1b33,\u1b45-\u1b4b,\u1b50-\u1b59,\u1b83-\u1ba0,\u1bae-\u1bb9,\u1c00-\u1c23,\u1c40-\u1c49,\u1c4d-\u1c7d,\u1d00-\u1dbf,\u1e00-\u1f15,\u1f18-\u1f1d,\u1f20-\u1f45,\u1f48-\u1f4d,\u1f50-\u1f57,\u1f59,\u1f5b,\u1f5d,\u1f5f-\u1f7d,\u1f80-\u1fb4,\u1fb6-\u1fbc,\u1fbe,\u1fc2-\u1fc4,\u1fc6-\u1fcc,\u1fd0-\u1fd3,\u1fd6-\u1fdb,\u1fe0-\u1fec,\u1ff2-\u1ff4,\u1ff6-\u1ffc,\u203f-\u2040,\u2054,\u2071,\u207f,\u2090-\u2094,\u2102,\u2107,\u210a-\u2113,\u2115,\u2119-\u211d,\u2124,\u2126,\u2128,\u212a-\u212d,\u212f-\u2139,\u213c-\u213f,\u2145-\u2149,\u214e,\u2183-\u2184,\u2c00-\u2c2e,\u2c30-\u2c5e,\u2c60-\u2c6f,\u2c71-\u2c7d,\u2c80-\u2ce4,\u2d00-\u2d25,\u2d30-\u2d65,\u2d6f,\u2d80-\u2d96,\u2da0-\u2da6,\u2da8-\u2dae,\u2db0-\u2db6,\u2db8-\u2dbe,\u2dc0-\u2dc6,\u2dc8-\u2dce,\u2dd0-\u2dd6,\u2dd8-\u2dde,\u2e2f,\u3005-\u3006,\u3031-\u3035,\u303b-\u303c,\u3041-\u3096,\u309d-\u309f,\u30a1-\u30fa,\u30fc-\u30ff,\u3105-\u312d,\u3131-\u318e,\u31a0-\u31b7,\u31f0-\u31ff,\u3400-\u4db5,\u4e00-\u9fc3,\ua000-\ua48c,\ua500-\ua60c,\ua610-\ua62b,\ua640-\ua65f,\ua662-\ua66e,\ua67f-\ua697,\ua717-\ua71f,\ua722-\ua788,\ua78b-\ua78c,\ua7fb-\ua801,\ua803-\ua805,\ua807-\ua80a,\ua80c-\ua822,\ua840-\ua873,\ua882-\ua8b3,\ua8d0-\ua8d9,\ua900-\ua925,\ua930-\ua946,\uaa00-\uaa28,\uaa40-\uaa42,\uaa44-\uaa4b,\uaa50-\uaa59,\uac00-\ud7a3,\uf900-\ufa2d,\ufa30-\ufa6a,\ufa70-\ufad9,\ufb00-\ufb06,\ufb13-\ufb17,\ufb1d,\ufb1f-\ufb28,\ufb2a-\ufb36,\ufb38-\ufb3c,\ufb3e,\ufb40-\ufb41,\ufb43-\ufb44,\ufb46-\ufbb1,\ufbd3-\ufd3d,\ufd50-\ufd8f,\ufd92-\ufdc7,\ufdf0-\ufdfb,\ufe33-\ufe34,\ufe4d-\ufe4f,\ufe70-\ufe74,\ufe76-\ufefc,\uff10-\uff19,\uff21-\uff3a,\uff3f,\uff41-\uff5a,\uff66-\uffbe,\uffc2-\uffc7,\uffca-\uffcf,\uffd2-\uffd7,\uffda-\uffdc":
"")+"-]","g"),"");f=f.replace(/^[#+-]+/,"");f=f.replace(/[.-]+$/,"");0<f.length&&-1==$.inArray(f,d)&&d.push(f)}return d}
StackExchange.question=function(){var h=function(a,b){var c=null!=a;a||(a=$("div.question div.post-menu a.short-link"));var f=a.closest(".post-menu, .help-menu");if(a.hasClass("share-link"))f.find(".close-share-tip").click();else{a.addClass("share-link");var d=a.attr("id").substring(10),g=a.closest(".col-section").length?"section":a.closest("div.question").length?"question":"answer",h="http://"+document.location.host+a.attr("href"),i=("answer"==g?"Answer: ":"")+$("#question-header a").text(),r='<div class="share-tip" style="display:none">share a link to this '+
g+'<input type="text" value="'+h+'" style="display:block; width:292px;">';StackExchange.options.site.enableSocialMediaInSharePopup&&(r+='<div id="share-icons"><a id="share-gp-'+d+'" class="share-gp" title="share link to this '+g+' on Google+">share [g+]</a><a id="share-fb-'+d+'" class="share-fb" title="share link to this '+g+' on Facebook">share [fb]</a><a id="share-tw-'+d+'" class="share-tw" title="share link to this '+g+' on Twitter">share [tw]</a></div>');var j=$(r+'<a class="close-share-tip" style="float:right">close</a></div>');
StackExchange.options.site.enableSocialMediaInSharePopup&&(g=encodeURIComponent(h),i=encodeURIComponent(i),StackExchange.share.gplus($("#share-gp-"+d,j),g,i,"2"),StackExchange.share.facebook($("#share-fb-"+d,j),g,i,"2"),StackExchange.share.twitter($("#share-tw-"+d,j),g,i,"2"),$("#share-icons a",j).click(function(){j.fadeOutAndRemove()}));b&&j.find(".close-share-tip").before('<a id="link-post-'+d+'" style="float:left">cite</a>');j.appendTo(f).fadeIn(c?"fast":0).bind("removing",function(){a.removeClass("share-link")}).find(".close-share-tip").click(function(){j.fadeOutAndRemove()}).end().find("input[type=text]").select()}},
a=function(a){var b=$("#post-form h2:first"),c=b.wrap("<div />").parent(),f=c.wrap("<div />").parent(),d=$("<div />").prependTo(f),g=f.height(),h=$("<div />"),a=$(a),i=parseInt(b.css("margin-bottom")),r=$("#content"),j=$("#wmd-input").outerWidth(),m=r.offset().left>b.offset().left-5&&"visible"!=r.css("overflow-x");h.css({height:0,overflowY:"hidden"}).appendTo(c).append(a);f.css({height:g,position:"relative"});c.css({position:"absolute",bottom:-i,width:j});d.addClass("answer-help-background").css({position:"absolute",
bottom:-i,height:0,width:j});m&&(d.css("left",0),c.animate({paddingLeft:5},1E3));h.animate({height:a.height()+i+10},1E3);d.animate({height:a.height()+i+10+g},1E3);$("<div style='float:right;margin-top:10px;'><a href='#'>ok</a></div>").hide().prependTo(c).fadeIn(1E3).find("a").one("click",function(a){var e=$(this).parent();setTimeout(function(){e.remove()},1);h.animate({height:0},1E3,function(){h.add(d).remove();b.unwrap().unwrap()});d.animate({height:0},1E3);m&&c.animate({paddingLeft:0},1E3);a.preventDefault()})},
c=function(){$.get("/posts/answer-help").then(a)},d,g,f,i=function(){var a=window.location.href;0>a.indexOf("#")||(a=a.match(/#(\d+|comment(\d+)_(\d+))/i))&&(a[2]?j(a[2],a[3]):m($(".answer[data-answerid="+a[1]+"]")))},j=function(a,b){var c="#comment-"+a,f=$(c);f.length?m(f):StackExchange.comments.loadAll($("#comments-link-"+b)).done(function(){m($(c))})},m=function(a){var b=f;a.css({backgroundColor:d}).animate({backgroundColor:b},2E3,"linear",function(){$(this).css("background-color","")});a.is(".comment")&&
a[0].scrollIntoView(!0)},l=function(a){a=a||{};$(".post-menu a.short-link").live("click",function(b){if(!b.ctrlKey&&!b.metaKey)return h($(this),a.showCitation),!1})};return{initTitleSearch:function(a,b,c){var f=0,d;a.attr("autocomplete","off");var g=function(g){var h=a.val();if(!(h==d&&!0!==g||StackExchange.options.site.newTitleSearchBoxEnabled&&0<$(".title-float-selected:visible").length)){for(var i=h.split(" "),j=0,o=0;o<i.length;o++)0<$.trim(i[o]).length&&j++;i=(new Date).getTime();o=(i-f)/1E3;
!0!==g&&(3>j||5>o)&&!a.hasClass("edit-field-overlayed")||(f=i,d=h,c&&(document.title=h+" - "+c),b.empty(),StackExchange.helpers.addSpinner(b),b.load("/search/titles?like="+escape(h),null,function(a){/\<label\>/i.exec(a)||(f=0);setTimeout(function(){b.find(".answer-link a").attr("target","_blank")},1)}))}},h=!1;b.mouseenter(function(){h=!0}).mouseleave(function(){h=!1});a.keyup(g).blur(function(){var a=function(){f=0;g()};if(h)b.one("mouseleave",a);else a()});return function(b){f=0;g(b)}},showShareTip:h,
getQuestionId:function(a){a=(a?a.closest(".question"):$(".question")).data("questionid");if(!a)throw Error("getQuestionId could not find an id");return a},highlightComment:j,initShareLinks:l,canViewVoteCounts:function(){return g},init:function(a){StackExchange.question.fullInit?StackExchange.question.fullInit(a):StackExchange.question.bindAnonymousVoteDisclaimers();StackExchange.comments.init({autoShowCommentHelp:a.autoShowCommentHelp});a.showShareTip&&h();$("input.anon-vote").live("click",function(){var b=
$(this),a=b.postId(),c=b.parent();c.closest(".question,.answer").unbind("mouseenter.helpful").unbind("mouseleave.helpful");c.text("sending feedback ...");setTimeout(function(){c.text("Thank you for your feedback.")},500);$.ajax({type:"POST",url:"/vote/anon/"+a,data:{votetypeid:"Yes"==b.val()?2:3},complete:function(){}})});var b=$(".was-this-helpful"),k=b.css("color"),j=$(".post-text").css("color");b.each(function(){var b=$(this),a=b.text();b.closest(".answer, .question").bind("mouseenter.helpful",
function(){b.html("Was this post useful to you? &nbsp;&nbsp;<input style='display:none;' class='anon-vote' type='button' value='Yes'/> &nbsp;<input style='display:none;' class='anon-vote' type='button' value='No'/>").stop(!0,!0).animate({color:j},"fast","linear").find("input").fadeIn("fast")}).bind("mouseleave.helpful",function(){b.text(a).stop(!0,!0).animate({color:k},"fast","linear")})});l(a);if(a.showAnswerHelp)$("#wmd-input").one("focus",c);a.showCitation&&$("div.share-tip a[id^='link-post-']").live("click",
function(){$(this).closest(".post-menu").find(".close-share-tip").click();citation.show($(this))});f=a.backgroundColor;d=a.highlightColor;g=a.canViewVoteCounts;i(a)}}}();
StackExchange.question.bindAnonymousVoteDisclaimers=function(){function h(a){return function(c){var d='Please <a href="/users/login?returnurl='+escape(document.location)+'">login or register</a> to '+a+" this post.";StackExchange.helpers.showErrorPopup($(this).parent(),d);var d="",g=$(this).prop("className"),f=$(this).closest(".answer").length?"answer":"question";/vote-up/.test(g)?d="?vote=up&type="+f:/vote-down/.test(g)?d="?vote=down&type="+f:/star/.test(g)&&(d="?vote=favorite");StackExchange.helpers.fireAndForget("/analytics/user/try-vote"+
d);c.preventDefault()}}$(".vote-up-off, .vote-down-off").click(h("vote for"));$("div.post-menu a[id^='flag-post-']").unbind("click").click(h("flag"));$(".star-off:not(.disabled)").live("click",h("favorite"));StackExchange.question.bindFetchAcceptedAnswerDates()};
StackExchange.question.bindFetchAcceptedAnswerDates=function(){$(".load-accepted-answer-date").hover(function(){var h=$(this);if(!h.is(":working")){h.working(!0);var a=h.closest(".answer").data("answerid");a?$.get("/posts/"+a+"/accepted-answer-date",function(a){h.attr("title",a)}):h.attr("title","")}})};
StackExchange.comments=function(){function h(a,c){this.postId=a;this.jDiv=c;this.jCommentsLink=$("#comments-link-"+a)}function a(a){var c=(a.constructor===$?a:$(a)).closest(".question, .answer, div[id^='post-']").find(".comments"),a=c.attr("id").replace(/^comments-/,"");if(d[a])return d[a];c=new h(a,c);return d[a]=c}function c(){if(0!=$(".question[data-questionid]").length){var a=StackExchange.question.getQuestionId();$(".comment .comment-date > span").each(function(){var c=$(this),d=c.closest(".answer"),
d=d&&d.length?d.data("answerid"):0,g=c.closest(".comment").attr("id").substr(8);c.wrap('<a class="comment-link" onclick="StackExchange.question.highlightComment({cid}, {aid})" href="{hash}"></a>'.format({hash:"#comment"+g+"_"+(d?d:a),cid:g,aid:d}))})}}var d={},g=function(){};h.prototype={checkDiscussion:g,ensureInput:g,commentsShown:function(){this.jCommentsLink.hide();this.jCommentsLink.data("comments-count",0)},addShow:function(a){var c=this;this.loadAllComments().done(function(){c.jCommentsLink.hide();
c.checkDiscussion()});var d=this.ensureInput();d&&!a&&d.focus()},ajax:function(a,c,d,g){d&&!g&&StackExchange.helpers.addSpinner(d,{"margin-left":"10px"});var h=this;return $.ajax(a).fail(function(a){$(".error-notification").fadeOut("fast",function(){$(this).remove()});a=a.responseText;if(!a||100<=a.length)a="An error occured"+(c?" "+c:"");StackExchange.helpers.showErrorPopup(d||h.jDiv,a);d&&!g&&StackExchange.helpers.removeSpinner()}).done(StackExchange.helpers.removeSpinner).promise()},showComments:function(a){this.jDiv.find(" > table > tbody").html(a);
this.jCommentsLink.text("add comment");"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);c();this.commentsShown()},loadAllComments:function(a){this.jDiv.removeClass("dno");if(!a&&!/more comment/.test($("#comments-link-"+this.postId).text()))return $.Deferred().resolve().promise();var c=this;return this.ajax({type:"GET",url:"/posts/"+this.postId+"/comments",dataType:"html"},"while fetching comments").done(function(a){c.showComments(a)}).promise()}};return{init:function(d){d=d&&
d.post||document;$("a[id^='comments-link-']",d).click(function(){var c=/more comment/.test($(this).text());a(this).addShow(c)});d==document&&c()},loadAll:function(c){return a(c).loadAllComments(!0)},extendPostUi:function(a){for(var c in a)a.hasOwnProperty(c)&&(h.prototype[c]=a[c])},uiForPost:a}}();
StackExchange.share=function(){function h(a,d,g){window.open(a,d,g)||(window.location.href=a)}function a(a,d,g){var d=d+("="+("undefined"!==typeof g?g:"1")),g=a.indexOf("?"),f=a.indexOf("#");return-1==g?-1==f?a+"?"+d:a.substring(0,f)+"?"+d+a.substring(f):-1==f?a+"&"+d:a.substring(0,f)+"&"+d+a.substring(f)}return{gplus:function(c,d,g,f){d=a(d,"sgp",f);c.click(function(){h("https://plus.google.com/share?url="+d,"sharegplus","toolbar=1,status=1,resizable=1,scrollbars=1,width=600,height=500")})},twitter:function(c,
d,g,f){d=a(d,"stw",f);c.click(function(){h("http://twitter.com/share?url="+d+"&ref=twitbtn&text="+g,"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},facebook:function(c,d,g,f){d=a(d,"sfb",f);c.click(function(){h("http://www.facebook.com/sharer.php?u="+d+"&ref=fbshare&t="+g,"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}}();
function initTagRenderer(h,a){window.tagRenderer||(window.tagRendererRaw=function(c,d){var d=d||"",g="";d||(h&&-1<$.inArray(c,h)?g=" required-tag":a&&-1<$.inArray(c,a)&&(g=" moderator-tag"));return"<a class='post-tag"+g+"' href='"+d+"/questions/tagged/"+encodeURIComponent(c)+"' title=\"show questions tagged '"+c+"'\" rel='tag'>"+c+"</a>"},window.tagRenderer=function(a,d){return $(tagRendererRaw(a,d))})}
function showFadingHelpText(h){h.wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}
function initFadingHelpText(){var h={"wmd-input":"#how-to-format",tagnames:"#how-to-tag","tag-editor":"#how-to-tag",title:"#how-to-title","wmd-input-42":"#how-to-format"},a=$("#wmd-input, #tagnames, #title, .tag-editor input, #wmd-input-42"),c=function(a){return $(a).parent().hasClass("tag-editor")?h["tag-editor"]:h[$(a).attr("id")]};a.focus(function(){var d=c(this);a.each(function(){var a=c(this);a!=d&&$(a).hide()});var g=$(d);g.is(":visible")||showFadingHelpText(g)})}
$.fn.extend({postId:function(){var h=this.first();if(!h.hasClass("answer")||!h.hasClass("question"))h=h.closest(".answer, .question");return parseInt(h.find(".vote input")[0].value)}});
StackExchange.newsletterAd=function(){function h(a){a=$('<div id="lightbox-panel" class="popup newsletter-popup" style="display:block"></div>').append('<div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div>').append(a);$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");a.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()})}function a(){var a=
StackExchange.options.site.name,d=$(['<div style="text-align: left;">','<h2 style="margin-bottom: 15px;">Subscribe to the '+a+" weekly newsletter</h2>",'<p><strong><a href="/users/login?returnurl=/newsletter/signup/redirect">Create an account on '+a+'</a> or <a href="/users/login?returnurl=/newsletter/signup/redirect">log in</a> if you already have one.</strong></p>','<form><label for="newsletter-email-input">Or, send newsletter emails to:</label> <input type="text" id="newsletter-email-input" maxlength="100" title="your email address" /> <input type="submit" value="Subscribe" id="newsletter-email-submit" /></form>',
$("#newsletter-ad .privacy-policy-agreement").parent().html(),"</div>"].join(""));d.find("form").submit(function(){var a=$(this),c=$.trim(d.find("#newsletter-email-input").val());if(0==c.length)return!1;StackExchange.helpers.addSpinner(a);$.ajax({url:"/newsletter/signup/anon",type:"POST",dataType:"json",data:{email:c},success:function(c){"confirmed"==c.status&&!c.error?(a.find("#newsletter-email-input").attr("disabled",!0),a.find("#newsletter-email-submit").replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),
$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>')):"unconfirmed"==c.status&&!c.error?(a.find("#newsletter-email-input").attr("disabled",!0),a.find("#newsletter-email-submit").replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),a.append("<br /><br/><p><em>Please click the link in the confirmation email to activate your subscription.</em></p>"),$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>')):
a.showErrorPopup(c.error||"there was a problem signing up for the newsletter<br />please try again later")},error:function(){a.showErrorPopup("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner(a)}});return!1});h(d)}return{init:function(){$("#newsletter-signup").click(function(){var c=$(this);if(StackExchange.options.user.isAnonymous)return a(),!1;StackExchange.helpers.addSpinner("#newsletter-signup-container");
$.ajax({url:"/newsletter/signup",type:"POST",dataType:"json",success:function(a){a.url?window.location.href=a.url:"confirmed"==a.status?$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>'):"unconfirmed"==a.status?$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>'):c.parent().showErrorPopup("there was a problem signing up for the newsletter<br />please try again later")},
error:function(){c.parent().showErrorPopup("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}})});$("#newsletter-preview").click(function(){var a=$(window).height(),a=Math.min(600,a-100),a=['<div id="newsleter-preview-pane" style="overflow: hidden; width: 660px; height: ',a,'px;"><iframe src="',$(this).attr("href"),'" width="660" height="',a,'" frameborder="0"></iframe></div>'].join("");
h(a);return!1})},loader:function(a,d){var a=d||a,g=$(".newuser-greeting");$.ajax({url:"/newsletter/targetted/ajax",data:{domain:a},success:function(a){$("#newsletter-ad").remove();g.empty().append($(a))},complete:function(){g.attr("class","").attr("style","")}});d||(window.sessionStorage.tNewsletter=a+"-continued")}}}();
(function(h,a,c,d){h.fn.caret=function(g,f){var i,j,m=this[0],l=h.browser.msie;"object"===typeof g&&"number"===typeof g.start&&"number"===typeof g.end?(i=g.start,j=g.end):"number"===typeof g&&"number"===typeof f?(i=g,j=f):"string"===typeof g?-1<(i=m.value.indexOf(g))?j=i+g[a]:i=null:"[object RegExp]"===Object.prototype.toString.call(g)&&(g=g.exec(m.value),null!=g&&(i=g.index,j=i+g[0][a]));if("undefined"!=typeof i)return l?(l=this[0].createTextRange(),l.collapse(!0),l.moveStart("character",i),l.moveEnd("character",
j-i),l.select()):(this[0].selectionStart=i,this[0].selectionEnd=j),this[0].focus(),this;if(l)if(j=document.selection,"textarea"!=this[0].tagName.toLowerCase()){l=this.val();i=j[c]()[d]();i.moveEnd("character",l[a]);var e=""==i.text?l[a]:l.lastIndexOf(i.text);i=j[c]()[d]();i.moveStart("character",-l[a]);var b=i.text[a]}else i=j[c](),j=i[d](),j.moveToElementText(this[0]),j.setEndPoint("EndToEnd",i),e=j.text[a]-i.text[a],b=e+i.text[a];else e=m.selectionStart,b=m.selectionEnd;i=m.value.substring(e,b);
return{start:e,end:b,text:i,replace:function(c){return m.value.substring(0,e)+c+m.value.substring(b,m.value[a])}}}})(jQuery,"length","createRange","duplicate");
StackExchange.captcha=function(){return{init:function(h,a){function c(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()}var d=$(['<div id="lightbox-panel" class="popup captcha-popup" style="display: block; text-align: left;"><div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div>',h,"</div>"].join("")),g=d.find("form:first");$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");d.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(c);
$.getScript("http://api.recaptcha.net/js/recaptcha_ajax.js",function(){Recaptcha.create(StackExchange.options.site.recaptchaPublicKey,"recaptcha",{theme:"clean",callback:Recaptcha.focus_response_field});StackExchange.helpers.enableSubmitButton(g);g.submit(function(){StackExchange.helpers.disableSubmitButton(g);g.find('input[type="submit"]').addSpinnerAfter();$.ajax({url:"/captcha",type:"POST",dataType:"json",data:g.serialize(),success:function(d){d.captchaError?(StackExchange.helpers.removeSpinner(),
StackExchange.helpers.enableSubmitButton(g),g.find(".form-error").html(d.captchaError),Recaptcha.reload()):(c(),a(d))},error:function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.enableSubmitButton(g);StackExchange.helpers.showErrorPopup(g,"An error occurred submitting the CAPTCHA")}});return!1})})}}}();StackExchange.loggedIn={};
var profileLink=function(){var h,a,c,d=!1,g,f,i,j=function(){return $(".profile-link")},m=function(a){a||(a=j());return a.hasClass("profile-link-on")},l=function(a,b){b.toggleClass("profile-link-on",a);$(".profile-triangle").toggleClass("profile-triangle-on",a)},e=function(a){if(!a.data("loading")){a.data("loading",!0);var b=a.find(".profile-stats");b.addSpinner();$.ajax({type:"GET",url:"/users/profile-link-stats",dataType:"html",success:function(a){$(a).hide().appendTo(b).fadeIn("fast")},error:function(){a.data("loading",
!1)},complete:StackExchange.helpers.removeSpinner})}},b=function(){var a=new Date;a.setTime(a.getTime()+1E3*i);var b=a.getUTCHours(),a=a.getUTCMinutes();10>b&&(b="0"+b);10>a&&(a="0"+a);$(".profile-popup .popup-clock").text("UTC time "+b+":"+a)},k=StackExchange.helpers.DelayedReaction(function(){profileLink.show()},450,{always:function(){p.cancel()}}),p=StackExchange.helpers.DelayedReaction(function(){profileLink.hide()},1E3,{always:function(){k.cancel()}}),n=function(a){a.hover(k.trigger,p.trigger)};
return{init:function(b,c,e,f){var k=j(),p=$(".profile-triangle");h=k.attr("href");a=b;d=c;g=e;i=f||0;p.click(profileLink.click);c||n(k.add(p));$(document).click(function(a){m(k)&&a.target!=k[0]&&a.target!=p[0]&&!$.contains($(".profile-wrapper")[0],a.target)&&profileLink.hide()})},click:function(){var a=j();p.cancel();k.cancel();m(a)?profileLink.hide():profileLink.show()},show:function(k,i){if(!k||"number"==typeof k)k=j();i||(i=$(".profile-popup"));if(!i.length){var p=k,r=$('<div class="profile-popup" style="position:absolute; display:none;"><div class="profile-wrapper"><div class="profile-gravatar"><a href="'+
h+'">'+a+'</a><ul class="profile-links"><li><a href="'+g+'">activity</a></li>'+(p.hasClass("child-meta")?"":'<li><a href="/privileges">privileges</a></li>')+'<li><a href="/users/logout">log out</a></li></ul></div><div class="profile-stats"></div><div class="profile-footer"><span class="popup-clock"></span> <a>close</a></div></div></div>');r.insertBefore(p).find(".profile-footer").click(profileLink.click);d||n(r);i=r}m(k)||(i.fadeIn("fast"),e(i),l(!0,k),f=new Date);c||(c=setInterval(b,2E4),b())},hide:function(a,
b){if(f&&!(500>(new Date).getTime()-f.getTime())){if(!a||"number"==typeof a)a=j();b||(b=$(".profile-popup"));m(a)&&(b.fadeOut("fast"),l(!1,a));c&&(clearInterval(c),c=null)}}}}();
StackExchange.tagPreferences=function(){function h(a,c,e){var b="";"undefined"!=typeof forUserId&&(b=forUserId);$.post("/users/save-preference",{fkey:StackExchange.options.user.fkey,key:a,value:c,forUserId:b},e)}var a=function(a,c){return a.map(function(a,b){return $(b).text()}).filter(function(a,b){if(!c)return!0;var d;/\*/.test(b)&&(d=RegExp(b.replace(/([.+])/g,"\\$1").replace(/\*/g,".*")));for(a=0;a<c.length;a++){var f=c[a];if(b===f||d&&d.test(f))return!1}return!0}).map(function(a,b){var c;c=b.replace(/#/g,
"\u00f1").replace(/\+/g,"\u00e7").replace(/\./g,"\u00fb");return/\*/.test(c)?"div.tags:regex(class, t-"+c.replace(/\*/g,".*")+")":"div.t-"+c}).get().join(",")},c=function(a,c,e,b,f,i){for(var j=$(a).val(),o=sanitizeAndSplitTags(j,!0),t=!1,q=0;q<o.length;q++)0!=$.trim(o[q]).length&&($(c).children().each(function(){$(this).text()==o[q]&&($(this).fadeTo(500,0.1).fadeTo(500,1),t=!0)}),t||(j=$.URLEncode(o[q]),$(c).append('<a id="'+o[q]+'" href="/questions/tagged/'+j+'" class="'+b+'" title="show questions tagged \''+
o[q]+"'\">"+o[q]+"</a> "),d(e)),t=!1);$(a).val("");f&&$(a).focus();i||h(e,$(c).text());g()},d=function(a){$(20==a?"#interestingTags > .post-tag:last":25==a?"#ignoredTags > .post-tag:last":"#interestingTags > .post-tag, #ignoredTags > .post-tag").append('<span class="delete-tag" title="remove this tag"></span>').click(function(a){a=$(a.target);if(a.is("[class^=delete-tag]")){var a=a.closest(".post-tag"),c=a.closest("div"),b=c.is("#ignoredTags")?25:20;a.remove();h(b,c.text());g();return!1}})},g=function(c,
d){var e=$("#ignoredTags > a"),b=$("#interestingTags > a");if(!c||!(0==e.length&&0==b.length)){$("div.question-summary").removeClass("tagged-ignored tagged-ignored-hidden tagged-interesting");e=a(e,d);b=a(b,d);if(0<e.length){var f=$("#hideIgnored").is(":checked")?"tagged-ignored-hidden":"tagged-ignored";$(e).closest("div.question-summary").addClass(f)}0<b.length&&$(b).closest("div.question-summary").addClass("tagged-interesting")}},f=function(a,d){var e=$("#tag-menu"),b;"favorite"==d&&(b=$("#ignoredTags a").filter(function(){return $(this).text()==
a}),b.add(b.next()).remove(),$("#interestingTag").val(a),c("#interestingTag","#interestingTags",20,"post-tag",!1,!0));"ignore"==d&&(b=$("#interestingTags a").filter(function(){return $(this).text()==a}),b.add(b.next()).remove(),$("#ignoredTag").val(a),c("#ignoredTag","#ignoredTags",25,"post-tag",!1,!0));"clear"==d&&(b=$("#ignoredTags a").filter(function(){return $(this).text()==a}),b.add(b.next()).remove(),b=$("#interestingTags a").filter(function(){return $(this).text()==a}),b.add(b.next()).remove(),
g());StackExchange.helpers.addSpinner(e);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(a)+"/favorite",data:{action:d,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(b){j(e.html($(""+b)),a)},error:function(){},complete:StackExchange.helpers.removeSpinner})},i=function(a,c){var d=$("#tag-menu");StackExchange.helpers.addSpinner(d);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(a)+"/subscription",data:{unsubscribe:c,fkey:StackExchange.options.user.fkey},dataType:"html",
success:function(b){j(d.html($(""+b)),a)},error:function(){},complete:StackExchange.helpers.removeSpinner})},j=function(a,c){a.find(".tm-se-subscription").click(function(){i(c,$(this).hasClass("tm-se-unsubscribe"))}).end().find(".tm-favorite, .tm-favorite-clear, .tm-favorite-ignore").click(function(){$(this).hasClass("tm-favorite")?f(c,"ignore"):$(this).hasClass("tm-favorite-clear")?f(c,"favorite"):$(this).hasClass("tm-favorite-ignore")&&f(c,"clear")})};return{applyPrefs:g,isIgnored:function(c){var d=
$("#ignoredTags > a");if($("#hideIgnored").is(":checked")&&(d=a(d,!0),0<d.length))return 0<$(c).find(d).length},init:function(){StackExchange.tagmenu.init(j);0!=$("#interestingTags").length&&(d(),$("#ignoredAdd").click(function(){c("#ignoredTag","#ignoredTags",25,"post-tag user-tag",!0)}),$("#interestingAdd").click(function(){c("#interestingTag","#interestingTags",20,"post-tag user-tag",!0)}),$("#hideIgnored").click(function(){h(30,$(this).is(":checked"));g()}),StackExchange.using("tagAutocomplete",
function(){bindTagFilterAutoComplete("#ignoredTag");bindTagFilterAutoComplete("#interestingTag")}))}}}();
StackExchange.question.fullInit=function(h){window.votesCast=h.votesCast;StackExchange.vote.init(h.questionId);StackExchange.question.bindSuggestedEditPopupLinks();h.canViewVoteCounts&&StackExchange.vote.bindFetchVoteCounts();StackExchange.vote_bounty.init(h);if(/^#autocomment/.test(window.location.hash)){var a=$(".comments-link:first"),c="#comment-"+window.location.hash.substring(12),d=function(){var a=$(c),d=$("<span><b>Trivial answer converted to comment</b></span>");a.find(".comment-date").append($("<br>")).append(d);
a.css({backgroundColor:h.highlightColor});a.animate({backgroundColor:h.backgroundColor},2E3,"linear",function(){$(this).css("background-color","")});$(c)[0].scrollIntoView(!0)};h.totalCommentCount&&h.shownCommentCount&&h.totalCommentCount!=h.shownCommentCount?StackExchange.comments.loadAll(a).done(d):d()}};
StackExchange.question.bindSuggestedEditPopupLinks=function(){function h(a){var c=a.parent(),d=a.attr("id").substring(13);a.data("working")||(a.data("working",!0).addSpinnerAfter({padding:"3px 0"}),$.ajax({type:"GET",url:"/review/suggested-edit-popup/"+d,dataType:"html",success:function(a){var a=$(['<div id="lightbox-panel" class="popup" style="display: block;"><div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div><div class="popup-suggested-edit">',a,"</div></div>"].join("")),
d=$(window).height();a.find(".popup-suggested-edit").css({"max-height":d-100});$('<div id="lightbox"/>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");a.appendTo(c).css("height","600px").center().css("height","").fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()})},error:function(a){c.showErrorPopup(a.responseText&&200>a.responseText.length?a.responseText:"Unable to load suggested edit - please try again")},complete:function(){StackExchange.helpers.removeSpinner();
a.removeData("working")}}))}$('div.post-menu a[id^="edit-pending-"]').each(function(){$(this).unbind("click").click(function(){h($(this));return!1})})};
StackExchange.vote=function(){var h=StackExchange.helpers,a={informModerator:-1,undoMod:0,acceptedByOwner:1,upMod:2,downMod:3,offensive:4,favorite:5,close:6,reopen:7,bountyClose:9,deletion:10,undeletion:11,spam:12},c=function(a){a||(a="div.vote");$(a).find(".vote-up-off").unbind("click").click(function(){i($(this))});$(a).find(".vote-down-off").unbind("click").click(function(){j($(this))})},d=function(a){return(a?a.closest("div.vote"):$("div.vote")).find(".vote-up-off, .vote-down-off").unbind("click")},
g=function(b){$.each(b,function(){var b=$("div.vote:has(input[value="+this.PostId+"])");switch(this.VoteTypeId){case a.upMod:b.find(".vote-up-off").addClass("vote-up-on");break;case a.downMod:b.find(".vote-down-off").addClass("vote-down-on");break;case a.favorite:b.find(".star-off").addClass("star-on");b.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js > highlightExistingVotes has no case for "+this.VoteTypeId)}});votesCast=null},f=
function(a){null==window.votesCast?$.ajax({type:"GET",url:"/posts/"+a+"/votes",dataType:"json",success:g}):g(window.votesCast);c()},i=function(c){var f=c.parent().find(".vote-up-off"),g=c.parent().find(".vote-down-off"),h=f.hasClass("vote-up-on"),i=g.hasClass("vote-down-on");b(c,h?-1:i?2:1);e(f,g);h||f.addClass("vote-up-on");f=h?a.undoMod:a.upMod;d(c);g=l(c);k(c,g,f,p)},j=function(c){var f=c.parent().find(".vote-up-off"),g=c.parent().find(".vote-down-off"),h=g.hasClass("vote-down-on"),i=f.hasClass("vote-up-on");
b(c,h?1:i?-2:-1);e(f,g);h||g.addClass("vote-down-on");f=h?a.undoMod:a.downMod;d(c);g=l(c);k(c,g,f,p)},m=function(){return $("div.vote a[id^='vote-accepted-']")},l=function(a){return a.closest("div.vote").find("input").val()},e=function(a,b){a.removeClass("vote-up-on");b.removeClass("vote-down-on")},b=function(a,b){var c=a.siblings("span.vote-count-post"),d;if(0<c.find(".vote-count-separator").length){d=parseInt(c.children(":first").text(),10);var e=Math.abs(parseInt(c.children(":last").text(),10));
d-=e;w(c)}else d=parseInt(c.text(),10);c.text(d+b)},k=function(a,b,c,d,e,f){var g={fkey:StackExchange.options.user.fkey};if(e)for(var h in e)g[h]=e[h];var k=function(){$.ajax({type:"POST",url:"/posts/"+b+"/vote/"+c,data:g,dataType:"json",success:function(c){c.Warning?confirm(c.Message)?(g.ignoreWarnings="true",k()):f&&f():(d(a,b,c),f&&f())},error:function(){n(a,"An error has occurred - please retry your request.");f&&f()}})};k()},p=function(b,d,f){if(f.Success){if(f.Message){var g=f.Message;h.showErrorPopup(b.parent(),
g,!0)}f.ShowShareTip&&(g=$(b).closest(".question,.answer").find('div.post-menu a:contains("link")'),StackExchange.question.showShareTip(g));f.LastVoteTypeId==a.upMod?$(document).trigger("upVote",d):f.LastVoteTypeId==a.downMod?$(document).trigger("downVote",d):$(document).trigger("undoVote",d)}else if(window.console&&window.console.firebug&&(!f.Message||5>f.Message.length))n(b,"FireBug seems to be enabled, which can sometimes interfere with voting;<br>please refresh the page to see if your vote was processed.<br><br>If this persists, consider disabling FireBug for this site.");
else if(n(b,f.Message),e(b,b),b.parent().find("span.vote-count-post").text(f.NewScore),f.LastVoteTypeId){var d=f.LastVoteTypeId,k;d==a.upMod?(g=".vote-up-off",k="vote-up-on"):d==a.downMod&&(g=".vote-down-off",k="vote-down-on");g&&b.closest("div.vote").find(g).addClass(k)}c(b.parent())},n=function(a,b,c){h.showErrorPopup(a.parent(),b,!1,c)},o=function(){$(".star-off:not(.disabled)").live("click",function(a){t($(this));a.preventDefault()})},t=function(b){if(!b.data("loading")){b.data("loading",!0);
var c=l(b)||b.siblings("input[type=hidden]").val(),d=b.parent().find("div.favoritecount b"),e=parseInt("0"+d.text().replace(/^\s+|\s+$/g,""),10),f=function(){b.hasClass("star-on")?(b.removeClass("star-on"),d.removeClass("favoritecount-selected").text(0>=e--?"":e)):(b.addClass("star-on"),d.addClass("favoritecount-selected").text(++e))};f();k(b,c,a.favorite,function(a,c,d){b.data("loading",!1);d.Success||(f(),b.parent().showErrorPopup(d.Message))})}},q=function(b,c){$("div.post-menu *[id^='delete-post-'], table.flagged-posts *[id^='delete-post-']").unbind("click").die("click").live("click",
function(d){d.preventDefault();var d=$(this),e=d.attr("id").substring(12),f=-1<d.text().indexOf("undelete");if(confirm("Vote to "+(f?"un":"")+"delete this post?"))k(d,e,f?a.undeletion:a.deletion,b||r,c)})},r=function(a,b,c){var d=-1<a.text().indexOf("undelete");c&&c.Success?(a.text(c.Message),0>c.NewScore?(a=0<$(".question:has(a[id='delete-post-"+b+"'])").length?".question, div.answer":"#answer-"+b,a=$(a),d?document.location.reload(!0):($("div.question-status:has(span:contains('delete'))").show(),
a.addClass("deleted-answer").find("a[id^='delete-post-']").addClass("deleted-post").end().find("div[id^='comments-']").addClass("comments-container-deleted").end().find("a[id^='comments-link-']").addClass("comments-link-deleted"))):n(a,"This post still needs "+c.NewScore+" vote(s) from other users to "+(d?"un":"")+"delete")):(d=c&&c.Message?c.Message:"A problem occurred during "+(d?"un":"")+"deletion",h.showErrorPopup(a.parent(),d))},u=function(){var b=$(this),c=b.attr("id").substring(14),d=m();b.is(":working")||
(b.parent().addSpinner(),d.working(!0),k(b,c,a.acceptedByOwner,function(c,e,f){f.Success?(d.removeClass("vote-accepted-on"),parseInt(f.Message,10)==a.acceptedByOwner&&b.addClass("vote-accepted-on")):n(b,f.Message);b.parent().removeSpinner();d.working(!1).trigger("update")}))},v=function(){var a=$(this),b=(a.hasClass("vote-accepted-on")?"un":"")+"accept";a.attr("title",a.data("title-"+b)).text(a.data("verb-"+b))},s=function(a){var b=a.closest("div.vote").children('input[type="hidden"]').val();a.addSpinner();
$.ajax({type:"GET",url:"/posts/{postId}/vote-counts".format({postId:b}),dataType:"json",success:function(b){$(".error-notification").fadeOutAndRemove();a.html('<div style="color:green">'+b.up+'</div><div class="vote-count-separator"></div><div style="color:maroon">'+b.down+"</div>").unbind("click").data("bound",!1).css("cursor","default").attr("title",Math.abs(+b.up)+" up / "+Math.abs(+b.down)+" down")},error:function(b){a.removeSpinner().parent().showErrorPopup(b.responseText&&100>b.responseText.length?
b.responseText:"An error occurred during vote count fetch")}})},w=function(a){(a||$(".vote-count-post")).not(".mobile-vote-count").not(":data(bound)").attr("title","View upvote and downvote totals").css("cursor","pointer").click(function(){s($(this))}).data("bound",!0)},x=function(a){f(a);$("div.post-menu a[id^='protect-post-']").unbind("click").click(function(a){a.preventDefault();a=this.id.substring(13);confirm("Are you sure you want to protect this question?")&&$.ajax({type:"POST",url:"/question/protect",
data:{id:a,fkey:StackExchange.options.user.fkey},success:function(){location.reload(!0)}});return!1});$("div.post-menu a[id^='unprotect-post-']").unbind("click").click(function(a){a.preventDefault();a=this.id.substring(15);confirm("Are you sure you want to unprotect this question?")&&$.ajax({type:"POST",url:"/question/unprotect",data:{id:a,fkey:StackExchange.options.user.fkey},success:function(){location.reload(!0)}});return!1});StackExchange.vote_closingAndFlagging.init();o()};return{init:function(a){!StackExchange.options.user.isRegistered?
StackExchange.question.bindAnonymousVoteDisclaimers():x(a);m().not(":data(bound)").on({click:u,update:v}).data("bound",!0).trigger("update");StackExchange.question.bindFetchAcceptedAnswerDates();q()},up:i,down:j,vote_init:f,favorite_init:o,delete_init:q,bindFetchVoteCounts:w,highlightExistingVotes:g,submit:k,voteTypeIds:a,getPostId:l}}();
StackExchange.vote_closingAndFlagging=function(){var h=StackExchange.vote.voteTypeIds,a,c=function(a,b,c,e){$("#close-question-popup").remove();var f=a.parent();c||a.addSpinnerAfter({padding:"0 3px"});$.ajax({type:"GET",url:"/posts/popup/close/"+b+(c?"?isForFlagging=1":""),dataType:"html",success:function(b){b=$(b);e&&(e.fadeOut("fast"),l=b);b.appendTo(f);d(b,a,e);b.center().fadeIn("fast")},error:function(){f.showErrorPopup("Unable to load popup - please try again")},complete:StackExchange.helpers.removeSpinner})},
d=function(a,b,c){a.find(".popup-close").click(function(){a.fadeOutAndRemove();c&&c.remove()});var d=a.find(".popup-actions-cancel");c?d.text("back").click(function(){a.fadeOut("fast");c.fadeIn("fast")}):d.click(function(){a.fadeOutAndRemove()});var e=a.find(".popup-submit");a.find('input[type=radio]:not(input[name="existing-close"])').click(function(){var b=$(this),c=b.closest("li");!c.hasClass("action-selected")&&!i(b)&&(e.enable(),a.find(".popup-active-pane li.action-selected").removeClass("action-selected"),
c.addClass("action-selected"))});var f=$("#duplicate-question"),h=$("#duplicate-question-id");f.helpOverlay().typeWatch({highlight:!1,wait:750,captureLength:-1,callback:function(){m(e,f,questionId,h)}});$("#close-question-form").submit(function(){g(a,b,$(this),h,e);return!1})},g=function(a,b,c,d,e){if(!e.attr("disabled")){$("#remaining-votes").addSpinner({position:"absolute",margin:"3px 0 0 5px"});e.disable();var g=0<a.find("input[name=isForFlagging]").length,h=d.val();$.ajax({type:"POST",url:c.attr("action"),
dataType:"json",data:{fkey:StackExchange.options.user.fkey,isForFlagging:g,"close-reason-id":$("#pane-main input[type=radio]:checked").val(),"migration-site-id":$('input[type=radio][id^="close-offtopic-"]:checked, input#migrate-anywhere:checked').val(),"duplicate-question-id":h},success:function(a){f(b,questionId,a,g,!!h)},error:function(){b.parent().showErrorPopup(-1<"A problem occurred when trying to "+b.text().indexOf("open")?"reopen":"close")},complete:function(){StackExchange.helpers.removeSpinner();
a.fadeOutAndRemove()}})}},f=function(b,c,d,e,f){!e&&b.is("[id^='flag-post-'], [id^='mobile-flag-post-']")&&(b=b.parent().find("a[id^='close-question'], a[id^='mobile-close-post-']"));c=b&&-1<b.text().indexOf("open")?"reopen":"close";if(d.Success){if(!a||!a.closeCallback||!a.closeCallback(b,d))if(d.Message){var g=b.parent();e?g.showErrorPopup(d.Message):(b.text(b.text().replace(/\w?\(\d\)/,"")+" "+d.Message),g.showErrorPopup("This question still needs "+d.NewScore+" vote(s) from other users to "+c));
f&&(b.closest(".mod-post-header").length||StackExchange.comments.loadAll(b))}else d.RedirectTo?location.href=d.RedirectTo:location.reload(!0)}else if(e=d.Message||"A problem occurred when trying to "+c,!a||!a.closeErrorCallback||!a.closeErrorCallback(e))f=null,d.Refresh&&(f=function(){location.reload(!0)}),b.parent().showErrorPopup(e,!1,f)},i=function(a){var b=a.attr("id").substr(6),c=$("#pane"+b);if(0==c.length)return null;$("#pane-main").removeClass("popup-active-pane").hide();c.addClass("popup-active-pane").show();
$.each(c.find(".auto-load"),function(){$(this).removeClass("auto-load").addSpinner();0==$(this).attr("id").indexOf("suggested-duplicates-")&&$(this).load("/posts/popup/close-suggestions/"+$(this).attr("id").substr(21),function(){var a=$("#duplicate-question");$(this).find(".existing-linked-questions input[type=radio]").click(function(){a.hideHelpOverlay().val($(this).parent().attr("title")).keydown()})})});a.closest("div.popup").find(".popup-actions-cancel").html("back").unbind("click").click(j);
window["pane"+b]();return c},j=function(){$(".popup-subpane").removeClass("popup-active-pane").hide();$("#pane-main").addClass("popup-active-pane").show().find("input[type=radio]:checked").removeAttr("checked").end().find("li.action-selected").removeClass("action-selected");$(".popup").find(".popup-submit").disable().end().find(".popup-actions-cancel").html("cancel").unbind("click").click(function(){$(".popup").fadeOutAndRemove()})},m=function(a,b,c,d){var e=b.parent().find(".selected-master-preview");
a.disable();e.html("");0!=$.trim(b.val()).length&&(StackExchange.helpers.addSpinner(e),$.ajax({type:"GET",url:"/posts/validate-duplicate-question/"+c,data:{val:b.val()},dataType:"json",success:function(b){b.success?(d.val(b.id),e.html('<div class="post-text"><h3><a href="'+b.url+'" target="_blank">'+b.title+"</a></h3><p>"+b.body+"</p></div><p>"+b.tags+"</p>"),a.enable()):b.title?e.html(b.title):e.html("")},error:function(a){StackExchange.helpers.removeSpinner();StackExchange.helpers.showErrorPopup(b.parent(),
a.responseText&&100>a.responseText.length?a.responseText:"An error occurred during duplicate validation")}}))},l,e,b=function(a){l=null;p(a);a.find("form").submit(function(){o(a);return!1});$("#flag-load-close").unbind("click").click(function(){if(e)e(a,$(this));else{var b=$(this);b.closest("li").siblings("li").trigger("hide-action");if(l)a.fadeOut("fast"),l.fadeIn("fast");else{b.siblings(".action-name").addSpinner({margin:"0 5px"});var d=a.attr("id").substr(11),f=$("#flag-post-"+d),g="true"==$("#flag-isClosePopupForFlagging").val();
c(f,d,g,a)}a.find(".popup-submit").disable();b.removeAttr("checked")}})},k=function(a){a=a.find("input:radio").attr("id").substr(5);a=a==h.offensive||a==h.spam;$(".flag-remaining-spam").toggle(a);$(".flag-remaining-inform").toggle(!a)},p=function(a){var b=a.find(".popup-submit"),c=a.find('textarea[name="flag-reason"]');c.focus(function(){c.hideHelpOverlay();var a=c.closest("li").find("input:radio");a.is(":checked")||a.attr("checked","checked")}).charCounter({min:10,max:500,setIsValid:function(a){var d=
c.closest("li").find("input[type=radio][value=other]").is(":checked"),e=c.closest("li").parent().closest("li").hasClass("action-selected");d&&e&&b.enable(a)}});a=c.closest(".action-subform");a.find("input.flag-prefilled").click(function(){b.enable()});a.find('input[value="other"]').click(function(){c.focus()});a.find("label, input:radio").css("cursor","pointer")},n=function(a){if(a.is(".mod-attention-subform")){var b=a.find('textarea[name="flag-reason"]');b.helpOverlay();a.find("input[value=other]:checked").length?
b.focus():a.find("input:radio:checked").length||a.closest(".popup").find(".popup-submit").disable()}},o=function(a){a.find(".popup-submit").disable().siblings(".spinner-container").addSpinner();var b=a.attr("id").substr(11),c=$("#flag-post-"+b),d=a.find('input[name="flag-post"]:checked').val();d==h.informModerator?t(a,b,c):StackExchange.vote.submit(c,b,d,q,null,function(){a.fadeOutAndRemove()})},t=function(b,c,d){var e=b.find(".mod-attention-subform"),f=e.find("input:radio:checked"),e="other"==f.val()?
e.find('textarea[name="flag-reason"]').val():f.val();$.ajax({type:"POST",url:"/messages/inform-moderator-about-post/"+c,dataType:"json",data:{fkey:StackExchange.options.user.fkey,msg:e},success:function(b){(!a||!a.flagCallback||!a.flagCallback(d,b))&&d.parent().showErrorPopup(b.Message)},error:function(a){d.parent().showErrorPopup(a.responseText&&100>a.responseText.length?a.responseText:"An error occurred during submission")},complete:function(){b.fadeOutAndRemove()}})},q=function(b,c,d){if(!a||!a.flagCallback||
!a.flagCallback(b,d))d.Refresh?location.reload(!0):b.parent().showErrorPopup(d.Message)};return{on_close_click:function(a){e=a},flag_actionSelected:k,flag_subformShow:n,close_initPopup:d,flag_loaded:b,init:function(d){a||(a=d);$("div.post-menu a[id^='close-question-'], table.flagged-posts input[id^='close-question-']").unbind("click").die("click").live("click",function(a,b){a.preventDefault();var d=$(this),e=!!b,g=-1<d.text().indexOf("open"),k=d.attr("id").substring(15);g?(e||confirm("Nominate this question for reopening?"))&&
StackExchange.vote.submit(d,k,h.reopen,f):(e="true"==$("#close-isClosePopupForFlagging").val(),c(d,k,e))});$("div.post-menu a[id^='flag-post-'], div.flag-options .flag-post").unbind("click").die("click").live("click",function(a){a.preventDefault();var a=$(this),c=a.attr("id").substring(10);a.loadPopup({url:"/posts/popup/flag/"+c+(a.hasClass("show-invalid")?"?showInvalid=true":""),loaded:b,hideDescriptions:!0,actionSelected:k,subformShow:n})})}}}();
(function(){function h(a,c){this.commentId=a;this.jComment=c;this.postUi=i(c)}function a(a){var a=a.constructor===$?a:$(a),a=a.hasClass("comment")?a:a.closest(".comment"),c=a.attr("id").replace(/^comment-/,"");return new h(c,a)}function c(a,c,d){/Android/.test(navigator.userAgent)&&$(c,a).bind("touchstart",function(a){a=$(a.target);if(!a.is(d))return!0;var b=a.data("events");if(b&&b.click&&b.click.length)return!0;a.click(function(){}).attr("data-nothing-to-see-here","X");return!0})}function d(b,d,
e){$(".comments",b).delegate(d,"click",function(){a(this)[e]()});c(b,".comments",d)}var g,f=StackExchange.comments,i=f.uiForPost;f.extendPostUi({ensureInput:function(){var a=this.jDiv.find('form[id^="add-comment-"]'),c=this;return a.children().length?(a.add(a.prev()).show(),a.find("textarea")):m(a,"Add Comment",!1,function(){c.submitNewComment()})},commentsShown:function(){try{var a=this.jDiv.find("form[id^='add-comment-'] textarea:focus");a.length&&StackExchange.comments.tabCompleter.init(a);this.jCommentsLink.data("comments-count",
0)}catch(c){}},submitNewComment:function(){var a=this.jDiv.find('form[id^="add-comment-"]'),c=a.find("textarea"),d=this,e=a.find('input[type="submit"]').parent();this.ajax({type:"POST",url:"/posts/"+this.postId+"/comments",dataType:"html",data:{comment:c.val(),fkey:StackExchange.options.user.fkey}},"during comment submission",e).done(function(e){d.showComments(e);c.val("").keyup().blur();StackExchange.helpers.enableSubmitButton(a);a.add(a.prev()).hide();d.jCommentsLink.show();$(document).trigger("comment",
d.postId)}).fail(function(){StackExchange.helpers.enableSubmitButton(a)})},checkDiscussion:function(){var a=this.jDiv.find("tr.is-comment-discussion"),c=this;if(a.length){a.remove();var d=this.jDiv.find(".comment-form");d.find(".discussion-info").length||($("<div style='margin:12px 0 3px; font-weight:bold' class='discussion-info'>Please avoid extended  discussions in comments. Would you like to <a href='#'>automatically move this discussion to chat?</a></div>").find("a").click(function(a){$(this).unbind("click");
a.preventDefault();c.ajax({url:"/posts/"+c.postId+"/move-discussion-to-chat",data:{fkey:StackExchange.options.user.fkey},type:"POST"},"when trying to move the discussion to chat",d).done(function(a){a.success?window.location.href=a.message:StackExchange.helpers.showErrorPopup(d,a.message)})}).end().prependTo(d),a.remove())}}});h.prototype={undoVoteUp:function(){if(confirm("Are you sure you want to undo your upvote on this comment? You will not be able to upvote it again.")){var a=this.jComment.find(".comment-up-on").addClass("comment-up comment-up-off").removeClass("comment-up-on comment-up-undo"),
c=this;this.submitVote(0).done(function(d){d.Success?(a.closest("tr").siblings("tr").show(),c.renderScore(d.NewScore),a[0].title="this comment adds something useful to the post",$(document).trigger("undoUpVoteComment",c.postUi.postId)):a.removeClass("comment-up-off comment-up").addClass("comment-up-on")}).fail(function(c){409===c.status&&a.addClass("comment-up-undo");a.removeClass("comment-up").addClass("comment-up-on")})}},voteUp:function(){var a=this.jComment.find(".comment-up").addClass("comment-up-on").removeClass("comment-up"),
c=this;this.submitVote(2).done(function(d){d.Success?(a.removeClass("comment-up-off").closest("tr").siblings("tr").hide(),a.addClass("comment-up-undo"),c.renderScore(d.NewScore),a[0].title="you've voted for this as a useful comment (click again to undo)",$(document).trigger("upVoteComment",c.postUi.postId)):a.removeClass("comment-up-on").addClass("comment-up")}).fail(function(){a.removeClass("comment-up-on").addClass("comment-up")})},"delete":function(){var a=this;confirm("Really delete this comment?")&&
this.submitVote(10).done(function(c){c.Success&&a.jComment.remove()})},flag:function(){var a=this;this.jComment.find(".comment-flag").loadPopup({url:"/posts/comments/popup/flag/"+this.commentId,loaded:function(c){var d=c.find("#comment-popup-other-text").charCounter({min:6,max:200,setIsValid:function(){g()}}),e=c.find("#comment-popup-other").click(function(){g();d.focus()}),f=c.find(".text-counter"),g=function(){var a=0==c.find('input[name="comment-reason"]:checked').length;e.is(":checked")?(a=d.show().val().length,
f.show(),a=6>a||200<a):(d.hide(),f.hide());c.find(".popup-submit").attr("disabled",a)};c.find("input").click(g);g();c.find("form").submit(function(){var f=(e.is(":checked")?d:c.find('input[name="comment-reason"]:checked')).val();c.fadeOutAndRemove();a.submitVote(4,f).done(function(c){c.Success&&(-1===c.NewScore?a.jComment.remove():a.jComment.find(".comment-flag, .comment-up").fadeOutAndRemove())});return!1})}})},edit:function(){var a=this.jComment,c=a.find('form[id^="edit-comment-"]'),d=this;a.find(" > td > *").not(c).hide();
a.find("td:last").addClass("comment-form");a=m(c,"Save Edits",!0,function(){d.submitEdit()});a.val(c.find("div").text());c.show();a.focus()},cancelEdit:function(){var a=this.jComment,c=a.find('form[id^="edit-comment-"]');c.children("table").remove();c.hide();c.unbind("submit");a.find("td:last").removeClass("comment-form");a.find(" > td > *").not(c).show()},submitEdit:function(){var a=this.jComment.find('form[id^="edit-comment-"]'),c=this;this.postUi.ajax({type:"POST",url:"/posts/comments/"+this.commentId+
"/edit",dataType:"html",data:{comment:a.find("textarea").val(),fkey:StackExchange.options.user.fkey}},"during comment submission",a).done(function(a){c.postUi.showComments(a)}).fail(function(){StackExchange.helpers.enableSubmitButton(a)})},submitVote:function(a,c){var d=this.jComment.find("td:first");return this.postUi.ajax({type:"POST",url:"/posts/comments/{commentId}/vote/{voteTypeId}".format({commentId:this.commentId,voteTypeId:a}),dataType:"json",data:{fkey:StackExchange.options.user.fkey,text:c},
success:function(a){!a.Success&&a.Message&&StackExchange.helpers.showErrorPopup(d,a.Message)}},"during voting",d,!0)},renderScore:function(a){var c="";a&&0<a&&(c+='<span title="number of \'useful comment\' votes received" class="'+(5>a?"":15>=a?"warm":30>=a?"hot":"supernova")+'">'+a+"</span>");this.jComment.find(".comment-score").html(c)}};var j=function(a){a.find("textarea").keyup(function(c){13==c.which&&!c.shiftKey&&!$(this).prev("#tabcomplete:visible").length&&a.submit()}).keypress(function(a){if(13==
a.which&&!a.shiftKey)return!1})},m=function(b,c,d,e){c=b.hasClass("mobile-comment-form")?'<textarea name="comment" rows="2"></textarea><input type="submit" value="'+c+'"/>':'<table><tr><td><textarea name="comment" cols="68" rows="3"></textarea></td><td><input tabindex="0" type="submit" value="'+c+'"/>'+(d?'<a tabindex="0" class="edit-comment-cancel">cancel</a>':"")+'<br/><a tabindex="0" class="comment-help-link">help</a></td></tr><tr><td colspan="2"><span class="text-counter"></span><span class="form-error"></span></td></tr></table>';
b.append(c);d&&b.find(".edit-comment-cancel").click(function(){a(b).cancelEdit()});var f=!1,d=b.find("textarea");d.charCounter({min:15,max:600,setIsValid:function(a){f=a}}).focus(function(){StackExchange.comments.tabCompleter.init($(this))});b.find(".comment-help-link").click(l);if(g)d.one("focus",l);b.submit(function(){f?(StackExchange.helpers.disableSubmitButton(b),e(b)):b.find("span.text-counter").animate({opacity:0},100,function(){$(this).animate({opacity:1},100)});return!1});StackExchange.options.desc||
j(b);return d},l=function(a){var c=$(this).closest("tbody"),d=c.find(".comment-help-link"),e=$(".comment-help",c),f;if("click"==a.type)f=0==e.length||!e.is(":visible"),f||(l.manualOnly=!0);else{if(l.manualOnly)return;f=!0}var g=function(){d.text(f?"hide help":"help")};0<e.length?f?e.slideDown(g):e.slideUp(g):f&&(a=$("<tr />").appendTo(c),a=$("<td colspan='2' />").appendTo(a),l.helpText?(a.html(l.helpText),$(".comment-help",a).slideDown(g)):(StackExchange.helpers.addSpinner(d),a.load("/posts/comment-help",
function(a){l.helpText=a;StackExchange.helpers.removeSpinner();$(".comment-help",this).slideDown(g)})))},e=f.init;f.init=function(a){e(a);g=a&&a.autoShowCommentHelp;a=a&&a.post||document;d(a,".comment-up","voteUp");d(a,".comment-delete","delete");d(a,".comment-flag","flag");d(a,".comment-edit","edit");d(a,".comment-up-undo","undoVoteUp");$("form.comment-form-expanded",a).each(function(){i(this).addShow(!0)})}})();
StackExchange.comments.tabCompleter=function(){function h(a){var b=$("#tabcomplete");b.empty();!(5<a.length)&&a.length&&$.each(a,function(a,c){var d=$("<li/>").text(c).appendTo(b);c.toLowerCase()==m.toLowerCase()&&d.addClass("chosen")})}function a(){var a=j.caret().start,b=j.val(),c=!1;if(/@[^\s!?();:+"].*@/.test(b)){if(!/`/.test(b))return null;c=!0}var d=b.substring(a).search(/[\s!?();:+"\[\]\\]/);-1==d&&(d=b.length-a);var f=b.substring(0,a+d).match(/@[^\s!?();:+"\[\]\\]+$/);if(!f)return null;var f=
f[0].substr(1),d=a+d,g=d-f.length;return c&&/@[^\s!?();:+"]/.test(b.substr(0,g-1))?null:{start:g,pos:a,end:d,name:f}}function c(c){var b=a();if(b.name===c)j.is(":focus")||j.focus();else{var d=j.val();j.val(d.substring(0,b.start)+c+d.substring(b.end));c=b.start+c.length;j.caret(c,c)}}function d(a){var b;if(9==a.which){b=$("#tabcomplete li");if(!b.length)return;var d=b.filter(".chosen").removeClass("chosen"),d=a.shiftKey?d.prev():d.next();d.length||(d=a.shiftKey?b.last():b.first());b=d.addClass("chosen").text()}else if(27==
a.which){b=$("#tabcomplete li");if(!b.length)return;b=m;m=null}else return;a.preventDefault();c(b)}function g(c){if(c.which)switch(c.which){case 9:case 16:case 17:case 18:case 220:return}var b=a();if(b){if(m!=b.name){c=[];m=b.name;for(var b=RegExp("^"+StackExchange.helpers.noDiacritics(b.name.replace(/ /g,"").toLowerCase()).replace(/\./g,"\\."),"i"),d=i.length,f=0;f<d;f++){var g=i[f].name;StackExchange.helpers.noDiacritics(g.replace(/ /g,"").toLowerCase()).match(b)&&c.push(g.replace(/ /g,""))}h(c)}}else m=
null,h([])}function f(a){return!a?null:parseInt(a.replace(/^\/users\/(\d+)\/.*$/,"$1"),10)||null}var i,j,m=null;$("#tabcomplete > li").live("mousedown",function(){var a=$(this);a.parent().find("li.chosen").removeClass("chosen");c(a.addClass("chosen").text());return!1});var l=f($("#hlinks a.profile-link").attr("href"));return{init:function(a){if(!StackExchange.options.isMobile){var b=a.closest("div.comments"),c=b.closest(".question, .answer").find(".post-signature:last .user-details a[href^='/users/']"),
c=f(c.attr("href")),h=[];b.find("a.comment-user").each(function(a,b){var c=b.firstChild;if(3!==c.nodeType)StackExchange.debug.log("unexpected structure in comment owner link");else{var c=c.nodeValue,d=f($(b).attr("href"));d!==l&&h.push({id:d,name:c})}});i=[];for(var b={},n=h.length-1;0<=n;n--){var o=h[n];b[o.id]||(i.push(o),b[o.id]=!0)}$("#tabcomplete").remove();j&&j.unbind($.browser.opera?"keypress":"keydown",d).unbind("keyup click",g);0===i.length||1===i.length&&i[0].id===c?j=null:(j=a,m=null,$("<ul id='tabcomplete' />").insertBefore(a),
a.bind("keydown",d).bind("keyup click",g))}}}}();
StackExchange.inlineEditing={init:function(){function h(a,c,d,g){c.fadeIn(d,g);a.hide()}$(".post-menu .edit-post").live("click",function(a){if(!a.ctrlKey&&!a.altKey&&!a.metaKey&&!a.shiftKey){var a=$(this),c=a.closest(".question, .answer");c.find("#edit-tags-cancel").length&&StackExchange.inlineTagEditing.restoreCurrentTags(!0);$("#show-editor-button").hide();a.addSpinner();var d=c.hasClass("answer"),g=c.find(".postcell,.answercell"),f=g.find("> *"),i=$('<div class="inline-editor"/>').hide().appendTo(g);
i.load(a.attr("href")+"-inline",function(a,m){var l;i.find("[tabindex]").each(function(){$(this).attr("tabindex",parseInt($(this).attr("tabindex")-20))});StackExchange.helpers.removeSpinner();c.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(c).offset().top-55},200);if("error"==m)StackExchange.helpers.showErrorPopup(g,"The post could not be loaded"),i.remove();else{h(f,i,300);var e=function(a){if(StackExchange.navPrevention){if(!StackExchange.navPrevention.confirm("You have started editing this post. Abandon this edit?"))return!1;
StackExchange.navPrevention.stop()}$("#show-editor-button").show();h(i,a,300,function(){i.remove()});a.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(c).offset().top-55},200);return!1},b=function(){q.unbind("keyup",k);u.trigger(l)},k=function(){u.trigger(q[0].value);return!0};i.find(".cancel-edit").click(function(){b();e(f)});var p=StackExchange.helpers.DelayedReaction(function(a){$.ajax({type:"POST",data:{hide:a},url:"/user/save-pref/hide-preview-for-inline-editing"})},
1E3,{sliding:!0}),n=i.find(".hide-preview");n.click(function(){var a=i.find(".wmd-preview"),b=a.is(":visible");b?(a.slideUp(),n.text("show preview")):(a.slideDown(),n.text("hide preview"));p.trigger(b);return!1});var o=i.find('input[type="submit"]');o.attr("id").replace("submit-button","");var t=i.find("form"),q=i.find("#title"),r=$("#question-header a");l=q.val();var u=StackExchange.helpers.DelayedReaction(function(a){r.text(a);"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,
r[0]])},{sliding:!0}),v=function(a){if(a.success){var b=$(a.html).hide();g.replaceWith(b);d||$("#question-header a").text(a.title);$("html").trigger("inline-edit-complete",[b,a.title]);styleCode();e(b)}else a.captchaHtml?StackExchange.captcha.init(a.captchaHtml,v):StackExchange.helpers.showErrorPopup(o.parent(),a.message)};q.keyup(k);i.find("#title,.wmd-input,#tagnames,.edit-comment").keydown(function(a){if(!0===a.ctrlKey&&13==a.keyCode)return t.submit(),!1;if(27==a.keyCode)return b(),e(f),!1});t.submit(function(){var a=
$(this).serialize();StackExchange.navPrevention&&StackExchange.navPrevention.stop();o.parent().addSpinner();StackExchange.helpers.disableSubmitButton(t);$.ajax({type:"POST",dataType:"json",data:a,url:t[0].action,success:v,error:function(){StackExchange.helpers.showErrorPopup(o.parent(),"An error occurred saving the edit")},complete:function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.enableSubmitButton(t)}});return!1})}});return!1}})}};
StackExchange.vote_bounty=function(){var h,a=function(a,c,d){c=$(".bounty-vote");if(d.Success){$(".bounty-notification").remove();h=!1;var g=a.closest("td.votecell").parent().find("span.reputation-score:last");d.Message&&(d=$(d.Message),g.text(d.text()).attr("title",d.attr("title")));d=a.closest("div.vote").find(".bounty-award-container");1<d.length?(d=d.filter(":first").find(".bounty-award"),g=parseInt(d.text(),10),a=parseInt(a.text(),10),d.text("+"+(g+a)),c.remove()):(a.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off"),
c.not(a).remove())}else StackExchange.helpers.showErrorPopup(a.parent(),d.Message),c.removeClass("disabled")},c=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")});$(".bounty-vote:not(.disabled)").live("click",function(){var c=$(this),d=StackExchange.vote.getPostId(c);if(h?confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!"):1)$(".bounty-vote").addClass("disabled"),StackExchange.vote.submit(c,
d,StackExchange.vote.voteTypeIds.bountyClose,a)})},d=function(a){a.addSpinnerAfter({padding:"0 3px"});var c=$(a).closest(".question").find("div.vote input").val();$.ajax({type:"GET",url:"/posts/bounty/"+c,dataType:"html",success:function(c){var d=$(c);d.appendTo(a.parent());d.find(".popup-close").click(function(){d.fadeOutAndRemove()});d.center().fadeIn("fast")},error:function(){a.parent().showErrorPopup("Unable to load popup - please try again")},complete:StackExchange.helpers.removeSpinner})},g=
function(){var a=$(".bounty-link");a.click(function(){d(a)})};return{init:function(a){h=!!a.hasOpenBounty;a.canOpenBounty&&g();a.hasOpenBounty&&c()}}}();
